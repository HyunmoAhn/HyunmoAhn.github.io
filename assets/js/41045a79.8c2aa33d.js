"use strict";(self.webpackChunkhyunmoahn_github_io=self.webpackChunkhyunmoahn_github_io||[]).push([[924],{1200:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return r},assets:function(){return p},toc:function(){return u},default:function(){return m}});var t=a(7462),o=a(3366),l=(a(7294),a(3905)),c=["components"],i={slug:"how-to-cancel-at-axios",title:"How to cancel at axios",description:"The article that how to use cancel logic on axios request.",keywords:["axios","javascript","HTTP","cancel","abort"],authors:"HyunmoAhn",tags:["axios","library","how-to-work","javascript","web"]},s=void 0,r={permalink:"/how-to-cancel-at-axios",source:"@site/blog/2021-09-17-how-to-cancel-at-axios.md",title:"How to cancel at axios",description:"The article that how to use cancel logic on axios request.",date:"2021-09-17T00:00:00.000Z",formattedDate:"2021\ub144 9\uc6d4 17\uc77c",tags:[{label:"axios",permalink:"/tags/axios"},{label:"library",permalink:"/tags/library"},{label:"how-to-work",permalink:"/tags/how-to-work"},{label:"javascript",permalink:"/tags/javascript"},{label:"web",permalink:"/tags/web"}],readingTime:5.115,truncated:!0,authors:[{name:"Hyunmo Ahn",title:"Front End Engineer @ Line Financial+",url:"https://github.com/HyunmoAhn",imageURL:"https://github.com/HyunmoAhn.png",key:"HyunmoAhn"}]},p={authorsImageUrls:[void 0]},u=[{value:"Purpose",id:"purpose",children:[]},{value:"Usage",id:"usage",children:[{value:"Simple Usage",id:"simple-usage",children:[]},{value:"Advanced Usage",id:"advanced-usage",children:[]}]},{value:"Inner Axios",id:"inner-axios",children:[{value:"What about CancelToken",id:"what-about-canceltoken",children:[]},{value:"Where do use CancelToken.promise?",id:"where-do-use-canceltokenpromise",children:[]}]},{value:"Recap",id:"recap",children:[]},{value:"Appendix",id:"appendix",children:[{value:"What happens to cancelToken that have already been canceled?",id:"what-happens-to-canceltoken-that-have-already-been-canceled",children:[]}]},{value:"Reference",id:"reference",children:[]}],k={toc:u};function m(e){var n=e.components,a=(0,o.Z)(e,c);return(0,l.kt)("wrapper",(0,t.Z)({},k,a,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"purpose"},"Purpose"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios"},"axios")," \uc5d0\uc11c\ub294 HTTP Request\ub97c cancel\ud558\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc774 cancel \uae30\ub2a5\uc774 \uc5b4\ub5a4 \ub85c\uc9c1\uc73c\ub85c \ub3d9\uc791\ud558\ub294\uc9c0 \uc54c\uc544\ubcf8\ub2e4."),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Prerequisites")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"HTTP \uc694\uccad\uc5d0 \ub300\ud55c \ub300\ub7b5\uc801\uc778 \uc9c0\uc2dd"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/axios/axios"},"Axios")," \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0 \ub300\ud55c \uc0ac\uc6a9\ubc29\ubc95")))),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("p",null,"Cancel\uc774 \uc5b4\ub5bb\uac8c \ub3d9\uc791\ud558\ub294\uc9c0 \uc54c\uc544\ubcf4\uae30 \uc774\uc804\uc5d0, axios\uc5d0\uc11c cancel\uc744 \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \ud655\uc778\ud569\ub2c8\ub2e4."),(0,l.kt)("h3",{id:"simple-usage"},"Simple Usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"import axios from 'axios';\n\n// Make CancelToken\nconst CancelToken = axios.CancelToken;\nconst source = CancelToken.source();\n\n// Register Cancel\naxios\n  .get('/url', { cancelToken: source.token })\n  .catch((e) => {\n    if (axios.isCancel(e)) { /* cancel logic */ }\n  })\n\n// Create Cancel\nsource.cancel('message');\n")),(0,l.kt)("p",null,"axios\uc5d0\uc11c cancel\uc744 \ud558\uace0\uc790\ud55c\ub2e4\uba74, \uba3c\uc800 ",(0,l.kt)("inlineCode",{parentName:"p"},"CancelToken"),"\uc744 \ub9cc\ub4e4\uc5b4\uc57c\ud55c\ub2e4. ",(0,l.kt)("br",null),"\n\ub9e4 axios \ud638\ucd9c\uc2dc\ub9c8\ub2e4 cancelToken\uc744 \uc804\ub2ec\ud558\uac8c \ub418\uace0, ",(0,l.kt)("inlineCode",{parentName:"p"},"source.cancel")," \uc744 \ud1b5\ud574\uc11c axios\ub97c cancel\ud558\ub294 \uac83\uc774\ub2e4."),(0,l.kt)("h3",{id:"advanced-usage"},"Advanced Usage"),(0,l.kt)("p",null,"\uc5ec\ub7ec axios\uc694\uccad\uc744 \ub3d9\uc2dc\uc5d0 \ubcf4\ub0b8\ub2e4\uba74 cancel\uc740 \uc5b4\ub5a4 \ub3d9\uc791\uc744 \ubcf4\uc5ec\uc904\uae4c?"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"import axios from 'axios';\n\n// Make CancelToken\nconst CancelToken = axios.CancelToken;\nconst source = CancelToken.source();\n\n// Register Cancel\naxios\n  .get('/url/first', { cancelToken: source.token })\n  .catch((e) => {\n    if (e.code === '403') { // session expired \n      source.cancel('session expired');\n    } \n  })\n\n// Register Cancel\naxios\n  .get('/url/second', { cancelToken: source.token })\n  .catch((e) => {\n    if (axios.isCancel(e)) { /* cancel logic */ }\n  })\n")),(0,l.kt)("p",null,"\uc704\uc640 \uac19\uc774 axios \uc694\uccad 2\uac1c\ub97c \ub3d9\uc2dc\uc5d0 \ubcf4\ub0c8\uc744 \ub54c \uac00\uc815\ud560 \uc2dc\ub098\ub9ac\uc624\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4. "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/url/first"),"\uc758 \uc751\ub2f5\uc774 ",(0,l.kt)("inlineCode",{parentName:"li"},"/url/second"),"\uc758 \uc751\ub2f5\ubcf4\ub2e4 \ube60\ub974\uac8c \ub3c4\ub2ec\ud588\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/url/first"),"\uc740 403 \uc138\uc158 \ub9cc\ub8cc \uc5d0\ub7ec\ub97c \ubc1b\uc558\ub2e4.")),(0,l.kt)("p",null,"\uadf8\ub807\ub2e4\uba74 ",(0,l.kt)("inlineCode",{parentName:"p"},"/url/second"),"\uc758 \uc751\ub2f5\uc740 \uc5b4\ub5bb\uac8c \ucc98\ub9ac\uac00 \ub420\uae4c?"),(0,l.kt)("p",null,"\uc815\ub2f5\uc740 ",(0,l.kt)("inlineCode",{parentName:"p"},"/url/first")," \uc5d0\uc11c cancel\ud55c \uc2dc\uc810\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},"/url/second")," \uc694\uccad\ub3c4 cancel\uc774 \ub41c\ub2e4\ub294 \uc810\uc774\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"/url/first")," \uc694\uccad\uacfc ",(0,l.kt)("inlineCode",{parentName:"p"},"/url/second")," \uc694\uccad\uc774 \uc11c\ub85c \ub2e4\ub978 \uc2a4\ucf54\ud504\uc5d0 \uc788\ub354\ub77c\ub3c4 \ub9c8\ucc2c\uac00\uc9c0\uc774\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("inlineCode",{parentName:"strong"},"/url/first")," axios \uc5d0\uc11c cancel \ud55c \uac83\uc774 \uc5b4\ub5bb\uac8c ",(0,l.kt)("inlineCode",{parentName:"strong"},"/url/second")," axios \uc5d0\ub3c4 \uc601\ud5a5\uc744 \ub07c\uce58\uace0 \uc788\uc744\uae4c\uc5d0 \ub300\ud55c \ud638\uae30\uc2ec\uc5d0 \uc774 \uae00\uc740 \ucd9c\ubc1c\ud55c\ub2e4.")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Question")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Q1. \ud558\ub098\uc758 axios\uc694\uccad\uc5d0\uc11c cancelToken\uc774 cancel\ub418\uc5c8\ub294\ub370 \uc5b4\ub5bb\uac8c \ub2e4\ub978 axios request\uac00 \uac19\uc774 \ucde8\uc18c\uac00 \ub420\uae4c?"))),(0,l.kt)("h2",{id:"inner-axios"},"Inner Axios"),(0,l.kt)("h3",{id:"what-about-canceltoken"},"What about CancelToken"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/axios.js#L40-L42"},"axios"),"\uc5d0\ub294 Cancel\uacfc \uad00\ub828\ub41c \uba54\uc18c\ub4dc\uac00 \ubd99\uc5b4\uc788\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/v0.21.1/lib/axios.js#L40-L42\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n")),(0,l.kt)("p",null,"axios cancel\uc744 \uc704\ud574\uc11c \uc120\ud589\ub418\uc5c8\ub358 \uc791\uc5c5\uc740 CancelToken\uc744 \ub9cc\ub4dc\ub294 \uac83 \uc774\uc5c8\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"CancelToken.source"),"\ub97c \uc0ac\uc6a9\ud574\uc11c \ud1a0\ud070\uc744 \uc0dd\uc131\ud588\uc73c\ubbc0\ub85c, ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js"},"axios.CancelToken")," \uc744 \uba3c\uc800 \uc0b4\ud3b4\ubcf8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n")),(0,l.kt)("p",null,"source\ub294 \ub2e8\uc21c\ud558\ub2e4. token\uacfc cancel\uc744 \uac00\uc9c0\uace0 \uc788\ub294 \uac1d\uccb4\ub97c \ubc18\ud658\ud558\uba70, \ub0b4\ubd80\uc5d0\uc11c CancelToken\uc744 \uc0dd\uc131\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js\nfunction CancelToken(executor) {\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    token.reason = new Cancel(message); // https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js\n    resolvePromise(token.reason);\n  });\n}\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js"},"CancelToken")," \uc0dd\uc131\uc5d0 \ub300\ud574\uc11c \ubcf4\uba74 \uc870\uae08 \uad6c\uc870\uac00 \ubcf5\uc7a1\ud574\ubcf4\uc774\uc9c0\ub9cc, \ud558\ub294 \uc5ed\ud560\uc740 2\uac00\uc9c0\uc774\ub2e4."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"CancelToken"),"\uc5d0 promise\ub97c \uc0dd\uc131\ud55c\ub2e4. \uc774 promise\uac00 \uc5b4\ub5bb\uac8c \uc4f0\uc774\ub294\uc9c0\ub294 \uc544\uc9c1 \uc54c \uc218 \uc5c6\ub2e4."),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"CancelToken.source")," \uc2a4\ucf54\ud504\uc5d0 \uc788\ub294 cancel\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"li"},"function cancel"),"\uc744 \ud560\ub2f9\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574\uc11c cancel\uc774 \uc2a4\ucf54\ud504 \uc678\ubd80\uc640 \uc5f0\uacb0\uc774 \ub41c\ub2e4.")),(0,l.kt)("p",null,"CancelToken\uc740 promise\uc640 cancel \ud568\uc218 2\uac00\uc9c0\ub97c \ub9cc\ub4e4\uba70, cancel\uc744 \ud638\ucd9c\ud588\uc744\ub54c promise\uac00 resolve\ub418\ub294 \ub85c\uc9c1\uc744 \uac16\uace0\uc788\ub2e4. cancel\uc740 ",(0,l.kt)("inlineCode",{parentName:"p"},"executor"),"\ub97c \ud1b5\ud574\uc11c ",(0,l.kt)("inlineCode",{parentName:"p"},"CancelToken.source")," \uc2a4\ucf54\ud504\ub85c \ud655\uc7a5\ub418\uace0 \uc774\ub294 \uc678\ubd80\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uba54\uc18c\ub4dc\uac00 \ub41c\ub2e4. "),(0,l.kt)("h4",{id:"recap-about-canceltoken"},"Recap about CancelToken"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"CancelToken\uc740 ",(0,l.kt)("inlineCode",{parentName:"li"},"CancelToken.source"),"\ub97c \ud1b5\ud574\uc11c \uc0dd\uc131\ub418\uba70, promise\uc640 cancel \ud568\uc218\ub97c \uac01\uac01 \uc0dd\uc131\ud55c\ub2e4."),(0,l.kt)("li",{parentName:"ul"},"\uc5ec\uae30\uc11c \uc0dd\uc131\ub41c ",(0,l.kt)("inlineCode",{parentName:"li"},"cancel"),"\uc740 ",(0,l.kt)("inlineCode",{parentName:"li"},"CancelToken.source")," \ub9ac\ud134 \uac12\uc73c\ub85c \uc804\ub2ec\ub418\uc5b4 \uc678\ubd80\uc5d0\uc11c \uc0ac\uc6a9\uac00\ub2a5\ud55c \ud568\uc218\ub85c \uc0ac\uc6a9\ub418\uba70, promise\uc758 \uc6a9\ub3c4\ub294 \uc544\uc9c1 \uc54c \uc218 \uc5c6\ub2e4.")),(0,l.kt)("h3",{id:"where-do-use-canceltokenpromise"},"Where do use CancelToken.promise?"),(0,l.kt)("p",null,"axios\ub294 \ub0b4\ubd80\uc801\uc73c\ub85c HTTP \uc694\uccad\uc5d0 adapter\ub97c \uc0ac\uc6a9\ud558\uace0 adapter\uc548\uc5d0 \uc774\uc640 \uad00\ub828\ub41c \ucf54\ub4dc\uac00 \ub4e4\uc5b4\uc788\ub2e4.\n\uadf8 \uc911\uc5d0 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/master/lib/adapters/xhr.js"},"xhr"),"\ucabd \ucf54\ub4dc\ub97c \ubcf8\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/master/lib/adapters/xhr.js#L22-L187\nvar request = new XMLHttpRequest();\n\nrequest.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\nrequest.onreadystatechange = function handleLoad() {\n  // HTTP success logic \n};\nrequest.send(requestData);\n")),(0,l.kt)("p",null,"\uae30\ubcf8 \ub3d9\uc791\uc740 \uc77c\ubc18\uc801\uc73c\ub85c ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/ko/docs/Web/API/XMLHttpRequest"},"XMLHttpRequest"),"\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uacfc \ub3d9\uc77c\ud558\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"request.open"),"\uc744 \ud1b5\ud574\uc11c url\uc744 \uc5f0\uacb0\ud558\uace0, ",(0,l.kt)("inlineCode",{parentName:"p"},"onreadystatechange"),"\ub97c \ud1b5\ud574\uc11c \uc131\uacf5\uc5d0 \ub300\ud574\uc11c \ud578\ub4e4\ub9c1\uc744 \ud558\uace0, ",(0,l.kt)("inlineCode",{parentName:"p"},"request.send"),"\ub97c \ud1b5\ud574\uc11c HTTP \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\n\uc5ec\uae30\uae4c\uc9c0\ub294 \ucf5c\ubc31 \ubc29\uc2dd\uc758 XMLHttpRequest\uc640 \ub3d9\uc77c\ud558\ub2e4."),(0,l.kt)("p",null,"\uc77c\ubc18 \ub3d9\uc791 \uc774\uc678\uc5d0\ub3c4 axios\uc758 xhr adapter\uc5d0\uc11c\ub294 cancelToken\uc744 \uc774\uc6a9\ud574\uc11c promise \ub85c\uc9c1\uc744 \ud558\ub098 \ub354 \uc0ac\uc6a9\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/master/lib/adapters/xhr.js#L168-L180\nif (config.cancelToken) {\n  // Handle cancellation\n  config.cancelToken.promise.then(function onCanceled(cancel) {\n    if (!request) {\n      return;\n    }\n\n    request.abort();\n    reject(cancel);\n    // Clean up request\n    request = null;\n  });\n} \n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"CancelToken.promise"),"\uc740 \uc5ec\uae30\uc11c \uc0ac\uc6a9\ud55c\ub2e4. \ub9e4 HTTP \uc694\uccad\ub9c8\ub2e4 cancelToken\uc744 \uc774\uc6a9\ud574\uc11c promise\ub97c \ud638\ucd9c\ud558\uace0 \uc788\ub2e4. ",(0,l.kt)("strong",{parentName:"p"},"\uc989, \ub9c8\uce58 ",(0,l.kt)("inlineCode",{parentName:"strong"},"Promise.race"),"\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83 \ucc98\ub7fc ",(0,l.kt)("inlineCode",{parentName:"strong"},"xhr"),"\uc694\uccad \uc751\ub2f5\uacfc ",(0,l.kt)("inlineCode",{parentName:"strong"},"cancelToken.promise"),"\uc758 \ub450\uac00\uc9c0 \uc911 \uba3c\uc800 \uc624\ub294 \uac83\uc744 \ucc98\ub9ac\ud558\ub294 \ub85c\uc9c1"),"\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 \uac83\uc774\ub2e4."),(0,l.kt)("p",null,"cancelToken\uc758 promise\uac00 resolve\ub418\uba74 xhr request\ub294 abort\ub418\uace0 axios request\ub294 reject\ub85c \uc885\ub8cc\ub418\uac8c\ub41c\ub2e4. \uc774\ub54c \uc5d0\ub7ec\uac1d\uccb4\ub294 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js"},"cancel"),"\uac1d\uccb4\uac00 \uc804\ub2ec\ub41c\ub2e4."),(0,l.kt)("p",null,"cancelToken\uc740 axios request\ub54c \uc8fc\uc785\uc744 \ubc1b\uace0, \uc5ec\ub7ec axios request\uac00 \ub3d9\uc77c\ud55c cancelToken\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \ub530\ub77c\uc11c \uc6b0\ub9ac\ub294 \ucc98\uc74c \uac00\uc84c\ub358 \uc9c8\ubb38\uc5d0 \ub300\ub2f5\uc744 \ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Question & Answer")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("blockquote",{parentName:"div"},(0,l.kt)("p",{parentName:"blockquote"},"Q1. \ud558\ub098\uc758 axios\uc694\uccad\uc5d0\uc11c cancelToken\uc774 cancel\ub418\uc5c8\ub294\ub370 \uc5b4\ub5bb\uac8c \ub2e4\ub978 axios request\uac00 \uac19\uc774 \ucde8\uc18c\uac00 \ub420\uae4c?")),(0,l.kt)("p",{parentName:"div"},"A1. axios\ub294 HTTP \uc694\uccad\ub9c8\ub2e4 cancelToken\uc744 \ubc1b\uace0, cancelToken\uc758 promise\ub97c \ud1b5\ud574\uc11c xhr \uc694\uccad\uacfc race(\uacbd\uc7c1)\uc0c1\ud0dc\uc5d0 \ub4e4\uc5b4\uac04\ub2e4.\n\ub2e4\ub978 axios \uc694\uccad\uc5d0\uc11c cancelToken\uc774 resolve \ub418\uc5c8\ub2e4\uba74 \ub3d9\uc77c\ud55c cancelToken\uc744 \uc8fc\uc785\ubc1b\uc740 \ubaa8\ub4e0 axios \uc694\uccad\uc740 promise\uac00 resolve\ub418\uc5b4 reject\ub85c \uc885\ub8cc\ub41c\ub2e4."),(0,l.kt)("p",{parentName:"div"},"\uc989, \uacf5\ud1b5\uc73c\ub85c \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 cancelToken\uc758 promise \uc0c1\ud0dc\uc5d0 \ub530\ub77c reject\ub97c \uc9c4\ud589\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 \ud558\ub098\uc758 axios \uc694\uccad\uc5d0\uc11c cancel\uc774 \ubc1c\uc0dd\ud558\uba74, \ub098\uba38\uc9c0 axios \uc694\uccad\ub3c4 \ud568\uaed8 cancel\uc774 \ubc1c\uc0dd\ub418\uac8c \ub418\ub294 \uac83\uc774\ub2e4."))),(0,l.kt)("h2",{id:"recap"},"Recap"),(0,l.kt)("p",null,"axios\ub294 \ud638\ucd9c\uc2dc HTTP\uc694\uccad \ubfd0 \uc544\ub2c8\ub77c cancel\uacfc \uad00\ub828\ub418\uc5b4 \uc788\ub294 promise\ub97c \ubc1c\uc0dd\uc2dc\ucf1c \uacbd\uc7c1\uc0c1\ud0dc\ub97c \ud615\uc131\ud55c\ub2e4. \uc774 \uacfc\uc815\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 cancel promise\ub294 \uc5ec\ub7ec axios \uc694\uccad\uc5d0\uc11c \uc0ac\uc6a9 \ub420 \uc218 \uc788\ub2e4. ",(0,l.kt)("br",null),"\ncancel\uacfc \uad00\ub828\ub41c promise\ub294 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js"},"cancelToken"),"\uc744 \ub9cc\ub4e4 \ub54c \uac19\uc774 \uc0dd\uc131\ub418\uba70 cancelToken\uc5d0\ub294 cancel promise\ub97c resolve \uc2dc\ud0a4\ub294 \ud568\uc218 ",(0,l.kt)("inlineCode",{parentName:"p"},"cancel"),"\ub3c4 \uac19\uc774 \uc81c\uacf5\ud55c\ub2e4.",(0,l.kt)("br",null),"\n",(0,l.kt)("inlineCode",{parentName:"p"},"cancelToken.cancel"),"\uc774 \ud638\ucd9c\ub418\uba74 cancel promise\ub294 resolve\ub418\uace0 \uc774\ub294 HTTP \uc694\uccad\uacfc \uacbd\uc7c1\uc0c1\ud0dc\ub97c \ud615\uc131\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 cancel\ub41c ",(0,l.kt)("inlineCode",{parentName:"p"},"cancelToken"),"\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 \ubaa8\ub4e0 axios \uc694\uccad\uc740 abort\ub418\uace0 reject\ub85c \ubc18\ud658\ub41c\ub2e4."),(0,l.kt)("h2",{id:"appendix"},"Appendix"),(0,l.kt)("p",null,"axios\uac00 cancel\uc744 \uc5b4\ub5bb\uac8c \ucc98\ub9ac\ud558\ub294\uc9c0\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubcf4\uc558\ub2e4. \uc774\ud6c4 \uae00\uc5d0\uc11c\ub294 axios cancel\uc744 \uc0ac\uc6a9\ud588\uc744\ub54c \ub9cc\ub098\uac8c \ub418\ub294 \uad81\uae08\uc99d\uc5d0 \ub300\ud574\uc11c \uc0b4\ud3b4\ubcfc \uac83\uc774\ub2e4. "),(0,l.kt)("h3",{id:"what-happens-to-canceltoken-that-have-already-been-canceled"},"What happens to cancelToken that have already been canceled?"),(0,l.kt)("p",null,"\uc774\uc81c\uaecf cancelToken\uc744 cancel\ud588\uc744 \ub54c \uc5b4\ub5bb\uac8c \ub3d9\uc791\ud558\ub294\uc9c0\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubcf4\uc558\ub2e4. \uadf8\ub807\ub2e4\uba74 \uc774\ubbf8 cancel\ub41c cancelToken\uc740 \uc5b4\ub5bb\uac8c \ub3d9\uc791\ud560\uae4c? ",(0,l.kt)("br",null),"\n\uc704\uc5d0\uc11c\ub3c4 \uc0b4\ud3b4\ubcf4\uc558\ub358 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js"},"CancelToken"),"\uc744 \ub2e4\uc2dc \uc0b4\ud3b4\ubcf4\uc790.\ncancel\uc774 \ubc1c\uc0dd\ud588\uc744 \ub54c, ",(0,l.kt)("inlineCode",{parentName:"p"},"CancelToken.reason"),"\uc5d0\ub294 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js"},"Cancel")," \uac1d\uccb4\uac00 \ud560\ub2f9\ub41c\ub2e4. \uc774 reason\uc774 cancel \uc5ec\ubd80\ub97c \ud310\ub2e8\ud558\ub294\ub370 \uc774\uc6a9\ub41c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js\nfunction CancelToken(executor) {\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    token.reason = new Cancel(message); // https://github.com/axios/axios/blob/v0.21.1/lib/cancel/Cancel.js\n    resolvePromise(token.reason);\n  });\n}\n")),(0,l.kt)("p",null,"CancelToken\uc5d0\ub294 cancel\ub418\uc5c8\ub294\uc9c0\ub97c \ud310\ub2e8\ud558\ub294 \ub2e4\ub978 \uba54\uc18c\ub4dc\uac00 \uc788\ub2e4. ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/axios/axios/blob/v0.21.1/lib/cancel/CancelToken.js#L36-L40"},"CancelToken.throwIfRequested"),"\uac00 \ubc14\ub85c \uadf8 \uc5ed\ud560\uc744 \ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"CancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n")),(0,l.kt)("p",null,"reason\uc774 \uc788\ub294\uc9c0 \uc5ec\ubd80\ub97c \ud310\ub2e8\ud558\uace0, reason\uc774 \uc788\uc73c\uba74 \uc774\ubbf8 cancel\ub41c token\uc774\ub77c \ud310\ub2e8\ud558\uace0 reason\uc744 throw\ud55c\ub2e4."),(0,l.kt)("p",null,"\uc774 ",(0,l.kt)("inlineCode",{parentName:"p"},"throwIfRequested"),"\ub294 axios request\uc758 \uc5ec\ub7ec \uad70\ub370\uc5d0\uc11c \ubc1c\uacac\ub41c\ub2e4. \uc544\ub9c8 \ub2e4\uc591\ud55c \ucf00\uc774\uc2a4\uc5d0\uc11c cancel\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc774\ub7ec\ud55c \uc870\uce58\ub4e4\uc774 \ucde8\ud574\uc9c4 \uac83\uc73c\ub85c \ucd94\uc815\ub41c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"// https://github.com/axios/axios/blob/v0.21.1/lib/core/dispatchRequest.js\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n  ...\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n    ...\n  }\n}\n")),(0,l.kt)("p",null,"\ub530\ub77c\uc11c \ud55c\ubc88 cancel\ub41c cancelToken\uc740 axios\uc694\uccad\uc2dc \uc790\ub3d9\uc73c\ub85c reject\ub85c \ube60\uc9c0\ub3c4\ub85d \uad6c\ud604\ub418\uc5b4\uc788\ub2e4.\ncancel \uc774\ud6c4 \ub2e4\uc2dc axios \uc694\uccad\uc744 \uc815\uc0c1\ud654\uc2dc\ud0a4\uae30 \uc704\ud574\uc11c\ub294 cancel\ub41c CancelToken\uc744 \ubc84\ub9ac\uace0, \uc0c8\ub86d\uac8c CancelToken\uc744 \uc0dd\uc131\ud574\uc11c axios\ub97c \ud638\ucd9c\ud574\uc57c axios \uc694\uccad\uc774 \uc911\ub2e8 \ub418\uc9c0 \uc54a\uace0 \uc815\uc0c1 \ud638\ucd9c\uc744 \ud560 \uac83\uc774\ub2e4. "),(0,l.kt)("h2",{id:"reference"},"Reference"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/axios/axios/tree/v0.21.1"},"axios github")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://axios-http.com/docs/cancellation"},"axios cancellation docs"))))}m.isMDXComponent=!0}}]);