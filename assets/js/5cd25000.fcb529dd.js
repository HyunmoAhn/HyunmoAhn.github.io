"use strict";(self.webpackChunkhyunmoahn_github_io=self.webpackChunkhyunmoahn_github_io||[]).push([[6356],{5358:(e,n,a)=>{a.d(n,{zD:()=>o,pe:()=>r,eY:()=>p,xX:()=>c,Vy:()=>i});const l="import { useEffect, useState } from 'react';\n\nexport const useAsyncData = () => {\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      setData([1, 2, 3]);\n    }, 2000);\n  }, []);\n\n  return data;\n};\n",t="import { useRef, useEffect, useMemo } from 'react';\n\nexport function useCallbackRef(callback) {\n  const callbackRef = useRef(callback);\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  return useMemo(\n    () =>\n      (...args) =>\n        callbackRef.current?.(...args),\n    [],\n  );\n}\n",o={"/App.js":"import { useEffect } from 'react';\nimport { useAsyncData } from './useAsyncData';\n\nexport default function App() {\n  const data = useAsyncData();\n  const handleCallback = () => {\n    console.log(`handle callback: ${new Date().toISOString()}`);\n  };\n\n  return (\n    <>\n      {data.map((item) => (\n        <li key={item}>{item}</li>\n      ))}\n      <ChildComponent onCallback={handleCallback} />\n    </>\n  );\n}\n\nconst ChildComponent = ({ onCallback }) => {\n  useEffect(() => {\n    onCallback();\n  }, [onCallback]);\n\n  return <>Child</>;\n};\n","/useAsyncData.js":l},r={"/App.js":"import { useEffect, useCallback } from 'react';\nimport { useAsyncData } from './useAsyncData';\n\nexport default function App() {\n  const data = useAsyncData();\n  const handleCallback = useCallback(() => {\n    console.log(`handle callback: ${new Date().toISOString()}`);\n  }, []);\n\n  return (\n    <>\n      {data.map((item) => (\n        <li key={item}>{item}</li>\n      ))}\n      <ChildComponent onCallback={handleCallback} />\n    </>\n  );\n}\n\nconst ChildComponent = ({ onCallback }) => {\n  useEffect(() => {\n    onCallback();\n  }, [onCallback]);\n\n  return <>Child</>;\n};\n","/useAsyncData.js":l},c={"/App.js":"import { useCallback, useEffect } from 'react';\nimport { useAsyncData } from './useAsyncData';\n\nexport default function App() {\n  const list = ['Hello', 'World'];\n  const data = useAsyncData();\n  const handleCallback = useCallback((index) => {\n    console.log(`handle callback: ${index}`);\n  }, []);\n\n  return (\n    <>\n      {list.map((item, index) => (\n        <ChildComponent key={index} onCallback={() => handleCallback(index)} />\n      ))}\n      {data.map((item) => (\n        <li key={item}>{item}</li>\n      ))}\n    </>\n  );\n}\n\nconst ChildComponent = ({ onCallback }) => {\n  useEffect(() => {\n    onCallback();\n  }, [onCallback]);\n\n  return <>Child</>;\n};\n","/useAsyncData.js":l},i={"/App.js":"import { useCallback, useEffect } from 'react';\nimport { useCallbackRef } from './useCallbackRef';\nimport { useAsyncData } from './useAsyncData';\n\nexport default function App() {\n  const list = ['Hello', 'World'];\n  const data = useAsyncData();\n  const handleCallback = useCallback((index) => {\n    console.log(`handle callback: ${index}`);\n  }, []);\n\n  return (\n    <>\n      {list.map((item, index) => (\n        <ChildComponent key={index} onCallback={() => handleCallback(index)} />\n      ))}\n      {data.map((item) => (\n        <li key={item}>{item}</li>\n      ))}\n    </>\n  );\n}\n\nconst ChildComponent = ({ onCallback }) => {\n  const handleCallback = useCallbackRef(onCallback);\n\n  useEffect(() => {\n    handleCallback();\n  }, [handleCallback]);\n\n  return <>Child</>;\n};\n","/useAsyncData.js":l,"/useCallbackRef.js":t},p={"/App.js":"import { useCallback, useEffect } from 'react';\nimport { useCallbackRef } from './useCallbackRef';\nimport { useAsyncData } from './useAsyncData';\n\nexport default function App() {\n  const data = useAsyncData();\n  const handleCallback = useCallback(() => {\n    if (data.length !== 0) {\n      console.log(`handle callback: ${data}`);\n    }\n  }, [data]);\n\n  return (\n    <>\n      {data.map((item) => (\n        <li key={item}>{item}</li>\n      ))}\n      <ChildComponent onCallback={handleCallback} />\n    </>\n  );\n}\n\nconst ChildComponent = ({ onCallback }) => {\n  const handleCallback = useCallbackRef(onCallback);\n\n  useEffect(() => {\n    handleCallback();\n  }, [handleCallback]);\n\n  return <>Child</>;\n};\n","/useAsyncData.js":l,"/useCallbackRef.js":t}},9288:(e,n,a)=>{a.d(n,{X:()=>v});var l=a(7294),t=a(6319),o=a(2949),r=a(362),c=a(1325),i=a(2297);const p=(0,r.ZP)(c.fC)``,s=r.ZP.div`
  display: flex;
  padding: 0 10px;
  border-bottom: 3px solid var(--ifm-color-emphasis-200);
`,d=(0,r.ZP)(c.aV)`
  flex: 1;
`,k=(0,r.ZP)(c.xz)`
  font-size: 1.1em;
  padding: 10px;

  color: var(--ifm-color-primary-darkest);
  background-color: transparent;
  border: none;

  &[data-state='active'] {
    color: var(--ifm-color-primary);
    font-weight: 500;
    border-bottom: 3px solid var(--ifm-color-primary);
  }
`,u=r.ZP.button`
  color: var(--ifm-color-emphasis-700);
  background-color: transparent;
  border: none;
`,m=(0,r.ZP)(c.VY)`
  display: none;
  height: 160px;
  overflow: scroll;

  &[data-state='active'] {
    display: block;
  }
`,C=e=>{let{defaultValue:n="result"}=e;const{refresh:a}=(0,t.xN)();return l.createElement(p,{defaultValue:n},l.createElement(s,null,l.createElement(d,null,l.createElement(k,{value:"result"},"Result"),l.createElement(k,{value:"console"},"Console")),l.createElement(u,{onClick:()=>a()},l.createElement(i.Z,{height:18,width:18}))),l.createElement(m,{value:"result",forceMount:!0},l.createElement(t.Gj,{showOpenInCodeSandbox:!1,showRefreshButton:!1})),l.createElement(m,{value:"console",forceMount:!0},l.createElement(t.Tq,{standalone:!0,resetOnPreviewRestart:!0})))};var b=a(4047),f=a(8814);const h=r.ZP.div`
  display: flex;
  gap: 10px;
  margin: 10px 14px;
`,g=r.ZP.div`
  flex: 1;
  font-size: 1.25em;

  align-self: center;

  color: var(--ifm-color-primary-dark);
`,N=r.iv`
  width: 24px;
  height: 24px;

  color: var(--ifm-color-emphasis-700);
  background-color: transparent;
  border: none;
`,x=r.ZP.button`
  ${N}
`,y=(0,r.ZP)(t.lc)`
  ${N}
`,R=e=>{let{title:n}=e;const{sandpack:a,dispatch:o}=(0,t.X3)();return l.createElement(h,null,l.createElement(g,null,n),l.createElement(x,{onClick:()=>{window.confirm("Reset All files")&&(a.resetAllFiles(),o({type:"refresh"}))}},l.createElement(b.Z,{height:16,width:16})),l.createElement(y,null,l.createElement(f.Z,{height:16,width:16})))},E=r.ZP.div`
  display: flex;
  flex-direction: column;

  border: 3px solid var(--ifm-color-emphasis-200);
  border-radius: 5px;
  height: 600px;

  margin-bottom: 30px;
`,A={"/index.js":{hidden:!0,code:'import React from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\nimport App from "./App";\nconst root = createRoot(document.getElementById("root"));\nroot.render(<App />);\n'}},v=e=>{let{files:n,title:a,strict:r=!1,defaultOutput:c}=e;const{colorMode:i}=(0,o.I)();return l.createElement(t.oT,{files:{...n,...!r&&A},theme:i,template:"react",options:{autorun:!0,autoReload:!0}},l.createElement(E,null,l.createElement(R,{title:a}),l.createElement(t._V,{style:{flex:7,overflow:"scroll"},showTabs:!0,showInlineErrors:!0,showLineNumbers:!0,wrapContent:!0}),l.createElement(C,{defaultValue:c})))}},2868:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>c,metadata:()=>p,toc:()=>d});var l=a(3117),t=(a(7294),a(3905)),o=a(9288),r=a(5358);const c={slug:"avoid-re-render-by-function-props",title:"callback function props\ub85c \uc778\ud55c re-render\ub97c \ud53c\ud558\ub294 \ubc95",description:"callback function\uc744 props\ub85c \uc8fc\uc785 \ud560 \ub54c \ubc1c\uc0dd \ud560 \uc218 \uc788\ub294 re-render\ub97c \ud53c\ud558\ub294 \ubc29\ubc95\uc744 \uc81c\uc2dc\ud55c\ub2e4.",keywords:["react","callback function","props","re-render","ref","web"],authors:"HyunmoAhn",tags:["react","callback function","web","props","re-render","ref"]},i=void 0,p={permalink:"/avoid-re-render-by-function-props",source:"@site/blog/2023-09-10-avoid-re-render-by-function-props.mdx",title:"callback function props\ub85c \uc778\ud55c re-render\ub97c \ud53c\ud558\ub294 \ubc95",description:"callback function\uc744 props\ub85c \uc8fc\uc785 \ud560 \ub54c \ubc1c\uc0dd \ud560 \uc218 \uc788\ub294 re-render\ub97c \ud53c\ud558\ub294 \ubc29\ubc95\uc744 \uc81c\uc2dc\ud55c\ub2e4.",date:"2023-09-10T00:00:00.000Z",formattedDate:"2023\ub144 9\uc6d4 10\uc77c",tags:[{label:"react",permalink:"/tags/react"},{label:"callback function",permalink:"/tags/callback-function"},{label:"web",permalink:"/tags/web"},{label:"props",permalink:"/tags/props"},{label:"re-render",permalink:"/tags/re-render"},{label:"ref",permalink:"/tags/ref"}],readingTime:10.55,hasTruncateMarker:!0,authors:[{name:"Hyunmo Ahn",title:"Front End Engineer @ Line+",url:"https://github.com/HyunmoAhn",imageURL:"https://github.com/HyunmoAhn.png",key:"HyunmoAhn"}],frontMatter:{slug:"avoid-re-render-by-function-props",title:"callback function props\ub85c \uc778\ud55c re-render\ub97c \ud53c\ud558\ub294 \ubc95",description:"callback function\uc744 props\ub85c \uc8fc\uc785 \ud560 \ub54c \ubc1c\uc0dd \ud560 \uc218 \uc788\ub294 re-render\ub97c \ud53c\ud558\ub294 \ubc29\ubc95\uc744 \uc81c\uc2dc\ud55c\ub2e4.",keywords:["react","callback function","props","re-render","ref","web"],authors:"HyunmoAhn",tags:["react","callback function","web","props","re-render","ref"]},nextItem:{title:"i18n\uacfc typescript",permalink:"/i18n-and-typescript"}},s={authorsImageUrls:[void 0]},d=[{value:"Problem Description",id:"problem-description",level:2},{value:"Solution?",id:"solution",level:3},{value:"useCallbackRef",id:"usecallbackref",level:2},{value:"Potential Issues",id:"potential-issues",level:2},{value:"Conclusion",id:"conclusion",level:2}],k={toc:d},u="wrapper";function m(e){let{components:n,...a}=e;return(0,t.kt)(u,(0,l.Z)({},k,a,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("p",null,"React\ub97c \uc0ac\uc6a9\ud558\ub2e4 \ubcf4\uba74 function\uc744 component props\ub85c \ub118\uae38 \ub54c re-render\ub97c \ud53c\ud558\uae30 \uc704\ud574 reference \uad00\ub9ac\uc5d0 \uc8fc\uc758\ud574\uc57c \ud55c\ub2e4.\n\ub300\ubd80\ubd84 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallback"),"\uc744 \uc0ac\uc6a9\ud574\uc11c \ubd88\ud544\uc694\ud55c re-render\ub97c \ud53c\ud558\uac8c \ub418\uc9c0\ub9cc \uc88b\uc740 \ub300\uc548\uc744 \ubc1c\uacac\ud558\uac8c \ub418\uc5b4\n\uc774 \uae00\uc744 \uc4f0\uac8c \ub418\uc5c8\ub2e4."),(0,t.kt)("p",null,"\uc601\uac10\uc744 \ubc1b\uc740 \ucf54\ub4dc\ub294 ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/radix-ui/primitives"},"radix-ui/primitives")," \uc758 ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/radix-ui/primitives/blob/main/packages/react/use-callback-ref/src/useCallbackRef.tsx"},"useCallbackRef")," \uc774\uba70\n\uc774 \uae00\uc5d0\uc11c\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\ub97c \uc4f0\ub294 \ucf00\uc774\uc2a4\uc640 \ub3d9\uc791\uc744 \uc774\uc57c\uae30 \ud560 \uc608\uc815\uc774\ub2e4."),(0,t.kt)("p",null,"\uc544\ub798\uc758 \ucf54\ub4dc\ub294 \uc55e\uc73c\ub85c \uc124\uba85 \ud560 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef")," \ucf54\ub4dc\uc774\ub2e4.\n\uacfc\uc5f0 \uc5b4\ub5a4 \uc0c1\ud669\uc5d0\uc11c \uc0ac\uc6a9 \ud560 \uac83 \uac19\uc740\uac00?"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-tsx"},"// useCallbackRef.js\nimport { useRef, useEffect, useMemo } from 'react';\n\nexport function useCallbackRef(callback) {\n  const callbackRef = useRef(callback);\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  return useMemo(() => ((...args) => callbackRef.current?.(...args)), []);\n}\n")),(0,t.kt)("h2",{id:"problem-description"},"Problem Description"),(0,t.kt)("p",null,"\uc6b0\uc120 function props\ub85c \uc778\ud55c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\ub294 \ucf00\uc774\uc2a4\ub97c \uc18c\uac1c\ud558\uaca0\ub2e4.\n\ub2e8\uc21c\ud558\uac8c state\uc758 \ubcc0\uacbd\uc73c\ub85c \uc778\ud574 function\uc758 reference\uac00 \ubc14\ub00c\uace0 children\uae4c\uc9c0 \uc601\ud5a5\uc744 \ub07c\uce58\ub294 \uc608\uc2dc\uc774\ub2e4."),(0,t.kt)(o.X,{title:"Basic Problem",files:r.zD,defaultOutput:"console",mdxType:"Playground"}),(0,t.kt)("p",null,"\uc704 \ucf54\ub4dc\uc5d0\uc11c \ubb38\uc81c\uc810\uc740 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uac00 2\ubc88 \ud638\ucd9c\ub418\ub294 \uac83\uc774\ub2e4."),(0,t.kt)("p",null,"\uba3c\uc800 \uc608\uc2dc \ucf54\ub4dc\uc758 \ubaa9\uc801\uc744 \uc774\uc57c\uae30\ud558\uba74 ",(0,t.kt)("inlineCode",{parentName:"p"},"useAsyncData")," \ub97c \uc0ac\uc6a9\ud574\uc11c \ub370\uc774\ud130\ub97c 2\ucd08 \ub4a4\uc5d0 \uac31\uc2e0\ud558\uace0,\n\uadf8\uc640\ub294 \ubcc4\uac1c\ub85c ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback")," \ud568\uc218\ub97c ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent")," \ub85c \uc804\ub2ec\ud558\uc5ec mount \uc2dc\uc810\uc5d0 1\ud68c \ud638\ucd9c\ud558\ub294 \ubaa9\uc801\uc774\ub2e4."),(0,t.kt)("p",null,"\ud750\ub984\uc744 \uc790\uc138\ud788 \uc774\ud574\ud558\uc790\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,t.kt)("mermaid",{value:'flowchart LR\n    First["App \\ndata: []\\n handleCallback"] -- Initial Render --\x3e FirstChildren["ChildComponent\\n onCallback: handleCallback"] --\x3e Emit["Emit first"]'}),(0,t.kt)("p",null,"\uccab render\uc5d0\uc11c\ub294 data\uac00 \ube44\uc5b4\uc788\uace0 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\ub294 \uc790\uc2dd\uc73c\ub85c \uc804\ub2ec\ub418\uc5b4 1\ud68c \ud638\ucd9c\ub41c\ub2e4."),(0,t.kt)("mermaid",{value:'flowchart LR\n    Second["App \\ndata: [1, 2, 3]\\n handleCallback`"] -- After update data --\x3e SecondChildren["ChildComponent\\n onCallback: handleCallback`"] --\x3e Emit["Emit Second"]'}),(0,t.kt)("p",null,"\uc774\ud6c4 data\uac00 \uc5c5\ub370\uc774\ud2b8 \ub418\uba74 App.js\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\ub97c \uc0c8\ub86d\uac8c \uc0dd\uc131\ud558\uc5ec ChildComponent\ub85c \uc804\ub2ec\ud558\ubbc0\ub85c 2\ubc88\uc9f8\ub85c ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uac00 \ud638\ucd9c\ub41c\ub2e4."),(0,t.kt)("h3",{id:"solution"},"Solution?"),(0,t.kt)("p",null,"\ubb3c\ub860, \uc704 \uc608\uc2dc\ub294 data\uc758 \uc5c5\ub370\uc774\ud2b8\uc640 \ubb34\uad00\ud558\uac8c ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback")," \uc744 \uba54\ubaa8\uc774\uc81c\uc774\uc158\ud558\ub294 \ubc29\ud5a5\uc73c\ub85c ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallback"),"\uc744 \uc0ac\uc6a9\ud558\uba74 \ud574\uacb0\ub41c\ub2e4."),(0,t.kt)(o.X,{title:"Basic Problem with useCallback",files:r.pe,defaultOutput:"console",mdxType:"Playground"}),(0,t.kt)("p",null,"\uadf8\ub807\uac8c \ud568\uc218 props\ub97c \uc804\ub2ec\ud560 \ub54c \uba54\ubaa8\uc774\uc81c\uc774\uc158\uc5d0 \uc2e0\uacbd \uc368 \uc8fc\uc5b4\uc57c\ud55c\ub2e4\ub294 \uad50\ud6c8\uc73c\ub85c \uae00\uc744 \ub9c8\ubb34\ub9ac\ud574\ub3c4 \uc88b\uaca0\uc9c0\ub9cc, \ub2e4\uc74c \uc608\uc2dc\ub294 \uc5b4\ub5a8\uae4c?"),(0,t.kt)(o.X,{title:"List Problem",files:r.xX,defaultOutput:"console",mdxType:"Playground"}),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-tsx"},"const handleCallback = useCallback((index) => {\n  console.log(`handle callback: ${index}`);\n}, []);\n\n...\n{list.map((item, index) => (\n  // highlight-next-line\n  <ChildComponent key={index} onCallback={() => handleCallback(index)} />\n))}\n")),(0,t.kt)("p",null,"\uc774\ubc88 \uc608\uc2dc\ub294 \uc774\uc804\uacfc\ub294 \ub2e4\ub974\uac8c callback function\uc774 list\ub85c \uc21c\ud68c\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\uc758 props\ub85c \uc8fc\uc785\ub418\uba70 item\uc744 \uc21c\ud68c \ud560 \ub54c\ub9cc \uc54c \uc218 \uc788\ub294 index \uc815\ubcf4\ub97c params\ub85c \uc8fc\uc785\ubc1b\ub294\ub2e4.\n\uc774\ub7f0 \uc870\uac74\uc774\ub77c\uba74 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc740 useCallback\uc73c\ub85c memoization \ud558\uc600\uc9c0\ub9cc render\uc5d0\uc11c \uc0dd\uc131\ub418\ub294 \uc775\uba85\ud568\uc218\ub54c\ubb38\uc5d0 \uc758\ub3c4\uce58\uc54a\uac8c \uc5ec\ub7ec\ubc88 \ud638\ucd9c\ub41c\ub2e4."),(0,t.kt)("p",null,"\uc774 \ub610\ud55c \ud574\uacb0 \ubc29\ubc95\uc774 \uc874\uc7ac\ud55c\ub2e4. index\ub97c props\ub85c \ub118\uaca8\uc8fc\uc5b4 \uc775\uba85\ud568\uc218\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent")," \ub0b4\ubd80\uc5d0\uc11c index\uc640 ",(0,t.kt)("inlineCode",{parentName:"p"},"onCallback"),"\uc744 \ud638\ucd9c\ud558\uba74 \ud574\uacb0\ub41c\ub2e4.\n\ud558\uc9c0\ub9cc \uc2e4\uc81c \uc0c1\ud669\uc5d0\uc11c\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent"),"\uac00 \uc81c\uc5b4 \ud560 \uc218 \uc5c6\ub294 \ucef4\ud3ec\ub10c\ud2b8(\uc678\ubd80 \ub77c\uc774\ube0c\ub7ec\ub9ac)\ub77c\uac70\ub098 \uacf5\ud1b5 \ucef4\ud3ec\ub10c\ud2b8 \uac19\uc774 \uc601\ud5a5\ubc94\uc704\uac00 \ub113\uc740 \uacbd\uc6b0\ub3c4 \ub9ce\uc544 \ubb38\uc81c \ud574\uacb0\uc774 \ubcf5\uc7a1\ud574\uc9c4\ub2e4."),(0,t.kt)("admonition",{type:"note"},(0,t.kt)("p",{parentName:"admonition"},"\uc704\uc5d0\uc11c \uc81c\uc2dc\ud55c \uc5ec\ub7ec \ubc29\ubc95\ub4e4\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent"),"\uc758 useEffect dependency\ub97c \uc218\uc815\ud558\ub294 \ubc29\ubc95\ub3c4 \uc874\uc7ac\ud558\uae34 \ud55c\ub2e4."),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre",className:"language-tsx"},"const ChildComponent = ({ onCallback }) => {\n  useEffect(() => {\n    onCallback();\n  // highlight-next-line\n  }, []);\n\n  return <>Child</>;\n};\n")),(0,t.kt)("p",{parentName:"admonition"},"\uc774\ub7ec\uba74 \ubb3c\ub860 \uc911\ubcf5 \ud638\ucd9c\uc774 \ud574\uacb0\ub418\uace0 \uc0c1\ud669\uc5d0 \ub530\ub77c\uc11c\ub294 \uc774 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud574\ub3c4 \ubb34\ubc29\ud558\ub2e4.\n\ud558\uc9c0\ub9cc react-hook\uacfc \uad00\ub828\ub41c lint rule\uc778 ",(0,t.kt)("a",{parentName:"p",href:"https://legacy.reactjs.org/docs/hooks-rules.html#eslint-plugin"},"react-hooks/exhaustive-deps"),"\uc5d0 \uc704\ubc30\ub418\uae30\ub3c4 \ud558\uace0\n\ub514\ubc84\uae45\uc744 \ud798\ub4e4\uac8c \ud558\ub294 \uc694\uc18c\ub77c\uace0 \uc0dd\uac01\ud558\ubbc0\ub85c \uc774 \uae00\uc5d0\uc11c\ub294 \uace0\ub824\ud558\uc9c0 \uc54a\ub294\ub2e4."),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre"},"ESLint: React Hook useEffect has a missing dependency:\n'onCallback'. Either include it or remove the dependency array.\nIf 'onCallback' changes too often, find the parent component that defines it and wrap that definition in useCallback.\n(react-hooks/exhaustive-deps)\n"))),(0,t.kt)("h2",{id:"usecallbackref"},"useCallbackRef"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\ub97c \uc0ac\uc6a9\ud574\ubcf4\uc790. \ubc29\uae08 \ubcf4\uc558\ub358 list \uc608\uc81c\uc5d0 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\ub97c \uadf8\ub300\ub85c \uc801\uc6a9\ud574\ubcf4\uc558\ub2e4."),(0,t.kt)(o.X,{title:"Use Callback Ref",files:r.Vy,defaultOutput:"console",mdxType:"Playground"}),(0,t.kt)("p",null,"\uc6b0\uc120 \uacb0\uacfc\ub9cc \ubcf4\uc558\uc744 \ub54c\ub294 \ubd88\ud544\uc694\ud55c ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback")," \ud638\ucd9c\uc740 \ubc1c\uacac\ub418\uc9c0 \uc54a\uc740 \uac83\ucc98\ub7fc \ubcf4\uc778\ub2e4. \uc608\uc81c\ucf54\ub4dc\ub97c \ub9ce\uc774 \uc218\uc815\ud588\uc744\uae4c?"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"showLineNumbers",showLineNumbers:!0},"// App.js\nconst ChildComponent = ({ onCallback }) => {\n  // highlight-start\n  const handleCallback = useCallbackRef(onCallback);\n  // highlight-end\n\n  useEffect(() => {\n  // highlight-start\n    handleCallback();\n  }, [handleCallback]);\n  // highlight-end\n\n  return <>Child</>;\n};\n")),(0,t.kt)("p",null,"App.js\uc5d0\uc11c\uc758 \ubcc0\uacbd\uc810\uc740 \uc5c6\uace0, ",(0,t.kt)("inlineCode",{parentName:"p"},"onCallback"),"\uc744 \uc0ac\uc6a9\ud558\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent")," \ub0b4\ubd80 \ub85c\uc9c1\uc5d0 \ubcc0\ud654\uac00 \uc788\uc5c8\ub2e4.\n",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\ub97c \uc0ac\uc6a9\ud574\uc11c props\ub85c \uc8fc\uc785 \ubc1b\uc740 ",(0,t.kt)("inlineCode",{parentName:"p"},"onCallback"),"\uc744 \ud55c\ubc88 \uac10\uc2f8\uace0 \ub098\uc628 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc744 \uc0ac\uc6a9\ud558\uba70 useEffect\uc758 dependency\uc5d0\ub3c4 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4."),(0,t.kt)("p",null,"\uadf8\ub807\ub2e4\uba74 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\uc758 \ub0b4\ubd80\ub294 \uc5b4\ub5a8\uae4c?"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"showLineNumbers",showLineNumbers:!0},"// useCallbackRef.js\nimport { useRef, useEffect, useMemo } from 'react';\n\nexport function useCallbackRef(callback) {\n  const callbackRef = useRef(callback);\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  return useMemo(() =>\n    (...args) => callbackRef.current?.(...args),\n  []);\n}\n")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\uc5d0\uc11c\ub294 2\uac00\uc9c0 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4."),(0,t.kt)("ol",null,(0,t.kt)("li",{parentName:"ol"},"callback \ud568\uc218\ub97c params\ub85c \ubc1b\uc544\uc11c \uacc4\uc18d\ud574\uc11c ",(0,t.kt)("inlineCode",{parentName:"li"},"ref"),"\uc5d0 \uc5c5\ub370\uc774\ud2b8 \ud574\uc900\ub2e4.")),(0,t.kt)("p",null,"\uc798 \ubcf4\uba74, ",(0,t.kt)("inlineCode",{parentName:"p"},"L7-L9"),"\uc5d0\uc11c dependency \uc5c6\uc774 \ub9e4 callback\uc774 \uc5c5\ub370\uc774\ud2b8 \ub418\uba74 ",(0,t.kt)("inlineCode",{parentName:"p"},"callbackRef"),"\uc5d0 \uac31\uc2e0\ud55c\ub2e4."),(0,t.kt)("ol",{start:2},(0,t.kt)("li",{parentName:"ol"},"callbackRef\uc5d0 \uc800\uc7a5 \ub41c callback\uc744 \ud638\ucd9c\ud558\ub294 \ud568\uc218\ub97c \ub9ac\ud134\ud55c\ub2e4.")),(0,t.kt)("p",null,"\uc5ec\uae30\uc11c\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"useMemo"),"\ub97c \uc0ac\uc6a9\ud574\uc11c return \uac12\uc774 \uac31\uc2e0\uc774 \ub418\uc9c0 \uc54a\ub3c4\ub85d \uba54\ubaa8\uc774\uc81c\uc774\uc158\uc744 \ud558\uba74\uc11c return \uac12\uc774 \ud638\ucd9c\uc2dc\uc5d0 ",(0,t.kt)("inlineCode",{parentName:"p"},"callbackRef")," \uac12\uc744 \uac00\uc838\uc640 \ud638\ucd9c\ud558\ubbc0\ub85c\n\ud56d\uc0c1 \ucd5c\uc2e0\uc758 callback\uc744 \ud638\ucd9c \ud560 \uc218 \uc788\ub2e4."),(0,t.kt)("p",null,"\ud750\ub984\uc744 \uc790\uc138\ud788 \uc774\ud574\ud558\uc790\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,t.kt)("mermaid",{value:'flowchart LR\n    First["App \\ndata: []\\n handleCallback"] -- Initial Render --\x3e FirstChildren["ChildComponent\\n callbackRef: handleCallback\\n MemoCallback"] --\x3e Emit["Emit first"]'}),(0,t.kt)("p",null,"\ucc98\uc74c\uc758 \ud750\ub984\uc740 \uae30\uc874\uacfc \ube44\uc2b7\ud558\ub2e4. App\uc740 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc744 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent"),"\ub85c \uc804\ub2ec\ud558\uace0 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent"),"\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"callbackRef"),"\uc5d0 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc744 \uc800\uc7a5\ud558\uace0 ",(0,t.kt)("inlineCode",{parentName:"p"},"MemoCallback"),"\uc744 \uc0ac\uc6a9\ud55c\ub2e4.\n",(0,t.kt)("inlineCode",{parentName:"p"},"Emit first"),"\uc5d0\uc11c \ud638\ucd9c \ub418\ub294 function\uc740 ",(0,t.kt)("inlineCode",{parentName:"p"},"MemoCallback"),"\uc774\uba70 ",(0,t.kt)("inlineCode",{parentName:"p"},"MemoCallback"),"\uc740 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\ub97c \uac00\ub9ac\ud0a4\uace0 \uc788\uc73c\ubbc0\ub85c \uc2e4\uc81c \ud638\ucd9c \ub418\ub294 \ud568\uc218\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\ub77c\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4."),(0,t.kt)("mermaid",{value:'flowchart LR\n    Second["App \\ndata: [1, 2, 3]\\n handleCallback`"] -- After update data --\x3e SecondChildren["ChildComponent\\n callbackRef: handleCallback`\\n MemoCallback"] --x Emit["Emit Second"]'}),(0,t.kt)("p",null,"\ub450\ubc88\uc9f8 \ud750\ub984\uc5d0\uc11c \ub2ec\ub77c\uc9c0\uac8c \ub418\ub294\ub370, data\uac00 \uc5c5\ub370\uc774\ud2b8 \ub418\uc5b4 handleCallback\uc774 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback` "),"\uc73c\ub85c \uc0c8\ub86d\uac8c \uc0dd\uc131\ub418\uc5b4 ",(0,t.kt)("inlineCode",{parentName:"p"},"ChildComponent"),"\ub85c \uc804\ub2ec\uc744 \ud558\uace0 ",(0,t.kt)("inlineCode",{parentName:"p"},"callbackRef"),"\ub294 \uc774\ub97c \uc0c8\ub86d\uac8c \uac31\uc2e0\ud558\uc9c0\ub9cc,\n\ucef4\ud3ec\ub10c\ud2b8 \ub0b4\ubd80\uc5d0\uc11c \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"MemoCallback"),"\ub294 reference\uac00 \ubc14\ub00c\uc9c0 \uc54a\uc73c\ubbc0\ub85c 2\ubc88\uc9f8 \ud638\ucd9c\uc774 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4."),(0,t.kt)("p",null,"\uc774\ub7ec\ud55c \ubc29\ubc95\uc740 \ud2b9\ud788 Component\ub97c \uc124\uacc4 \ud560 \ub54c \uc678\ubd80\uc5d0 memoization\uc744 \ud574\uc57c\ud55c\ub2e4\ub294 \uaddc\uce59\uc744 \ubd80\uc5ec\ud558\uc9c0 \uc54a\uace0 \ub0b4\ubd80\uc801\uc73c\ub85c \ucd5c\uc801\ud654\ub97c \ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uacf5\ud1b5 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc124\uacc4 \ud560 \ub54c\uc5d0\ub3c4 \uc720\uc6a9\ud558\uac8c \uc4f0\uc77c \uc218 \uc788\ub294 \ubc29\ubc95\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4."),(0,t.kt)("h2",{id:"potential-issues"},"Potential Issues"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\uac00 \ubaa8\ub4e0 \uac83\uc758 \ud574\uacb0\ucc45\uc774 \ub420 \uc218\ub294 \uc5c6\ub2e4. \uc704 \uc608\uc2dc\ub4e4\uc5d0\uc11c ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc774 \uccab\ubc88\uc9f8 \ud638\ucd9c\uc774 \uc544\ub2c8\ub77c \ub450\ubc88\uc9f8 \ud638\ucd9c\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\ub77c\uba74\n\ub450\ubc88\uc9f8 \ud638\ucd9c\uc740 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc758\ub3c4\ud558\uc9c0 \uc54a\uc740 \ub300\ub85c \ub3d9\uc791 \ud560 \uc218 \uc788\ub2e4."),(0,t.kt)("p",null,"\uc544\ub798 \uc608\uc2dc\ub294 ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc5d0\uc11c data \uc815\ubcf4\ub97c \uac00\uc9c0\uace0 \ud638\ucd9c\ud558\ub294 \uac83\uc744 \ubaa9\uc801\uc73c\ub85c \ud558\ub294 \ucf54\ub4dc\uc774\ub2e4."),(0,t.kt)(o.X,{title:"Edge Case",files:r.eY,defaultOutput:"console",mdxType:"Playground"}),(0,t.kt)("p",null,"\uc774 \uc608\uc81c\uc5d0\uc11c\ub294 \uc624\ud788\ub824 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef")," \uc73c\ub85c \uc778\ud558\uc5ec ",(0,t.kt)("inlineCode",{parentName:"p"},"handleCallback"),"\uc774 \uc815\uc0c1 \ud638\ucd9c\ub418\uace0 \uc788\uc9c0 \uc54a\uc740 \ubaa8\uc2b5\uc774\ub2e4."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-tsx"},"// handleCallback\nconst data = useAsyncData();\n\nconst handleCallback = useCallback(() => {\n  // highlight-start\n  if (data.length !== 0) {\n    console.log(`handle callback: ${data}`);\n  }\n  // highlight-end\n}, [data]);\n")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"data"),"\uac00 \uc788\ub294 \uac83\uc744 \uc804\uc81c\ub85c \ub3d9\uc791\ud558\uae30 \ub54c\ubb38\uc5d0 (",(0,t.kt)("inlineCode",{parentName:"p"},"data.length !== 0"),")\n\uc624\ud788\ub824 \uc911\ubcf5 \ud638\ucd9c\uc744 \uc720\ub3c4\ud558\ub294 \uac83\uc774 \uc62c\ubc14\ub978 \ubaa9\uc801\uc774\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4."),(0,t.kt)("h2",{id:"conclusion"},"Conclusion"),(0,t.kt)("p",null,"React\uc5d0\uc11c function\uc744 props\ub85c \uc804\ub2ec \ud560 \ub54c re-render \ub85c \uc778\ud558\uc5ec \ubc1c\uc0dd \ud560 \uc218 \uc788\ub294 \uc774\uc288\ub4e4\uc744 ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallback"),"\uacfc \uac19\uc740 \uc815\uacf5\ubc95\uc774 \uc544\ub2cc\n\ub2e4\ub978 \ud574\uacb0 \ubc29\uc548\uc73c\ub85c ",(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef")," \ub77c\ub294 custom hook \ub3d9\uc791\uc744 \uc18c\uac1c\ud558\uc600\ub2e4."),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"useCallbackRef"),"\ub294 props\ub85c \uc804\ub2ec \ubc1b\uc740 function\uc744 \ub9e4\ubc88 ",(0,t.kt)("inlineCode",{parentName:"p"},"ref"),"\uc5d0 \uc800\uc7a5\ud558\uba70 ",(0,t.kt)("inlineCode",{parentName:"p"},"ref"),"\uc5d0 \uc800\uc7a5 \ub41c \ud568\uc218\ub294 \ud56d\uc0c1 \ucd5c\uc2e0\uc758 props function\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\ub2e8, return \uac12\uc740 useMemo\ub85c \uac10\uc2f8\uc11c \ub178\ucd9c\uc2dc\ud0a4\uae30 \ub54c\ubb38\uc5d0 props \ubcc0\uacbd\uc73c\ub85c \uc778\ud55c re-render\ub294 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4."),(0,t.kt)("p",null,"\uc774\ub97c \ud1b5\ud574\uc11c callback \ud568\uc218 \ud638\ucd9c \ud0c0\uc774\ubc0d\uc5d0 \uac00\uc7a5 \ucd5c\uc2e0\uc758 callback \ud568\uc218\ub97c \uac00\uc838\uc624\uba74\uc11c \uc758\ub3c4\uce58 \uc54a\uc740 re-render\ub85c \uc778\ud55c \ud638\ucd9c\uc740 \ubc29\uc9c0 \ud560 \uc218 \uc788\ub2e4."),(0,t.kt)("p",null,"\ub2e8, dependency\uc5d0 \ub530\ub77c\uc11c \ub4a4\ub2a6\uac8c \ud638\ucd9c, \uc5ec\ub7ec\ubc88 \ud638\ucd9c \ud558\ub294 \ucf00\uc774\uc2a4\uac00 \uc788\ub2e4\uba74 \uc624\ud788\ub824 \ub3c5\uc774 \ub420 \uc218 \uc788\ub294 \ub85c\uc9c1\uc774\ubbc0\ub85c \uc0c1\ud669\uc5d0 \ub9de\uac8c \uc798 \ud310\ub2e8\ud558\uc5ec\uc57c \ud560 \uac83\uc774\ub2e4."))}m.isMDXComponent=!0}}]);