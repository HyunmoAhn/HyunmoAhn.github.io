"use strict";(self.webpackChunkhyunmoahn_github_io=self.webpackChunkhyunmoahn_github_io||[]).push([[4356],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>h});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(a),m=o,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return a?n.createElement(h,r(r({ref:t},p),{},{components:a})):n.createElement(h,r({ref:t},p))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,r[1]=s;for(var u=2;u<i;u++)r[u]=a[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(7294),o=a(4334);const i={tabItem:"tabItem_Ymn6"};function r(e){let{children:t,hidden:a,className:r}=e;return n.createElement("div",{role:"tabpanel",className:(0,o.Z)(i.tabItem,r),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(3117),o=a(7294),i=a(4334),r=a(2466),s=a(6550),l=a(1980),u=a(7392),p=a(12);function d(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:o}}=e;return{value:t,label:a,attributes:n,default:o}}))}function c(e){const{values:t,children:a}=e;return(0,o.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,s.k6)(),i=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,l._X)(i),(0,o.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(n.location.search);t.set(i,e),n.replace({...n.location,search:t.toString()})}),[i,n])]}function g(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,i=c(e),[r,s]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:i}))),[l,u]=h({queryString:a,groupId:n}),[d,g]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,i]=(0,p.Nk)(a);return[n,(0,o.useCallback)((e=>{a&&i.set(e)}),[a,i])]}({groupId:n}),f=(()=>{const e=l??d;return m({value:e,tabValues:i})?e:null})();(0,o.useLayoutEffect)((()=>{f&&s(f)}),[f]);return{selectedValue:r,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),g(e)}),[u,g,i]),tabValues:i}}var f=a(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:t,block:a,selectedValue:s,selectValue:l,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,r.o5)(),c=e=>{const t=e.currentTarget,a=p.indexOf(t),n=u[a].value;n!==s&&(d(t),l(n))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=p.indexOf(e.currentTarget)+1;t=p[a]??p[0];break}case"ArrowLeft":{const a=p.indexOf(e.currentTarget)-1;t=p[a]??p[p.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:r}=e;return o.createElement("li",(0,n.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:c},r,{className:(0,i.Z)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":s===t})}),a??t)})))}function y(e){let{lazy:t,children:a,selectedValue:n}=e;const i=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===n));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},i.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function v(e){const t=g(e);return o.createElement("div",{className:(0,i.Z)("tabs-container",b.tabList)},o.createElement(k,(0,n.Z)({},e,t)),o.createElement(y,(0,n.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return o.createElement(v,(0,n.Z)({key:String(t)},e))}},8635:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var n=a(3117),o=(a(7294),a(3905)),i=a(4866),r=a(5162);const s={slug:"how-to-use-oas-generator",title:"How to use OAS generator in Front-end environment?",description:"OAS generator",keywords:["OAS","OAS-generator","typescript","typescript-axios","how-to-use","web"],authors:"HyunmoAhn",tags:["OAS","OAS-generator","typescript","typescript-axios","how-to-use","web"]},l=void 0,u={permalink:"/en/how-to-use-oas-generator",source:"@site/i18n/en/docusaurus-plugin-content-blog/2022-03-28-how-to-use-oas-generator-in-front-end.mdx",title:"How to use OAS generator in Front-end environment?",description:"OAS generator",date:"2022-03-28T00:00:00.000Z",formattedDate:"March 28, 2022",tags:[{label:"OAS",permalink:"/en/tags/oas"},{label:"OAS-generator",permalink:"/en/tags/oas-generator"},{label:"typescript",permalink:"/en/tags/typescript"},{label:"typescript-axios",permalink:"/en/tags/typescript-axios"},{label:"how-to-use",permalink:"/en/tags/how-to-use"},{label:"web",permalink:"/en/tags/web"}],readingTime:19.885,hasTruncateMarker:!0,authors:[{name:"Hyunmo Ahn",title:"Front End Engineer @ Line Biz+",url:"https://github.com/HyunmoAhn",imageURL:"https://github.com/HyunmoAhn.png",key:"HyunmoAhn"}],frontMatter:{slug:"how-to-use-oas-generator",title:"How to use OAS generator in Front-end environment?",description:"OAS generator",keywords:["OAS","OAS-generator","typescript","typescript-axios","how-to-use","web"],authors:"HyunmoAhn",tags:["OAS","OAS-generator","typescript","typescript-axios","how-to-use","web"]},prevItem:{title:"i18n and typescript",permalink:"/en/i18n-and-typescript"},nextItem:{title:"Deep dive to immer",permalink:"/en/deep-dive-to-immer"}},p={authorsImageUrls:[void 0]},d=[{value:"OAS Generator, What is it?",id:"oas-generator-what-is-it",level:2},{value:"OAS? Open Api Specification",id:"oas-open-api-specification",level:3},{value:"OAS Generator",id:"oas-generator",level:3},{value:"So, what&#39;s good?",id:"so-whats-good",level:2},{value:"The difference from conventional way",id:"the-difference-from-conventional-way",level:3},{value:"It is just good?",id:"it-is-just-good",level:3},{value:"1. Yaml files should be able to be extracted from API documents.",id:"1-yaml-files-should-be-able-to-be-extracted-from-api-documents",level:4},{value:"2. API documents must be accurate.",id:"2-api-documents-must-be-accurate",level:4},{value:"3. Duplicated code, The increase bundle size.",id:"3-duplicated-code-the-increase-bundle-size",level:4},{value:"4. Initial configuration code and configuration maintenance",id:"4-initial-configuration-code-and-configuration-maintenance",level:4},{value:"Next",id:"next",level:3},{value:"Usage of OAS Generator",id:"usage-of-oas-generator",level:2},{value:"1. Get the <code>yaml</code> file.",id:"1-get-the-yaml-file",level:3},{value:"2. generate code using <code>open-api-generator-cli</code>.",id:"2-generate-code-using-open-api-generator-cli",level:3},{value:"3. Use generated code.",id:"3-use-generated-code",level:3},{value:"Next",id:"next-1",level:3},{value:"OAS Generator Config",id:"oas-generator-config",level:2},{value:"The setting of OAS Generator - CLI",id:"the-setting-of-oas-generator---cli",level:3},{value:"The setting of OAS Generator - Config file",id:"the-setting-of-oas-generator---config-file",level:3},{value:"OAS Generator Template",id:"oas-generator-template",level:2},{value:"When do you use Custom Template?",id:"when-do-you-use-custom-template",level:3},{value:"Flow of Custom Template",id:"flow-of-custom-template",level:3},{value:"Get the Template files",id:"get-the-template-files",level:3},{value:"Mustache Template",id:"mustache-template",level:3},{value:"Check JSON Data",id:"check-json-data",level:3},{value:"The example of Custom Template",id:"the-example-of-custom-template",level:2},{value:"Convert from Enum Type to Union Type",id:"convert-from-enum-type-to-union-type",level:3},{value:"Convert to Snake case variable naming rule to Camel case variable naming rule",id:"convert-to-snake-case-variable-naming-rule-to-camel-case-variable-naming-rule",level:3},{value:"Edit util function in template",id:"edit-util-function-in-template",level:3},{value:"The story of optimization",id:"the-story-of-optimization",level:2},{value:"Attempt 1: Reduce total code size.",id:"attempt-1-reduce-total-code-size",level:3},{value:"Attempt 2: Tree shaking",id:"attempt-2-tree-shaking",level:3},{value:"Result",id:"result",level:3},{value:"Recap",id:"recap",level:2}],c={toc:d},m="wrapper";function h(e){let{components:t,...s}=e;return(0,o.kt)(m,(0,n.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"I am using OAS-generator in project recently.\nWhen deciding to use it, there were many things that required consideration and confirmation.\nAnd, I'm going to write about my experience using OAS-generator because it seems to have a lot of good things after using."),(0,o.kt)("p",null,"Perhaps those who are curious about what OAS-generator is, those who know but are worried about using it,\nand those who are already using it but are hesitant to use it well,\nI hope that you will learn good motifs and experiences by reading this article."),(0,o.kt)("p",null,"What this article says is as follows."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"What is the OAS-generator."),(0,o.kt)("li",{parentName:"ul"},"The pros and cons of using OAS-generator."),(0,o.kt)("li",{parentName:"ul"},"How to use OAS-generator.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Configuration"),(0,o.kt)("li",{parentName:"ul"},"Custom Templates"))),(0,o.kt)("li",{parentName:"ul"},"Optimization")),(0,o.kt)("admonition",{title:"Pre-required",type:"info"},(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"The experience to develop front-end using Rest API"),(0,o.kt)("li",{parentName:"ul"},"Can read the mustache ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/janl/mustache.js"},"Grammar"),"(Optional)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Even if you don't know, there's no problem reading this article. But, you want to use OAS-generator, you should know it."))))),(0,o.kt)("h2",{id:"oas-generator-what-is-it"},"OAS Generator, What is it?"),(0,o.kt)("p",null,"Before to know OAS Generator, Let to know what is the ",(0,o.kt)("inlineCode",{parentName:"p"},"OAS"),"."),(0,o.kt)("h3",{id:"oas-open-api-specification"},"OAS? Open Api Specification"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"OAS")," is abbreviation of ",(0,o.kt)("inlineCode",{parentName:"p"},"Open Api Specification"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"The OpenAPI Specification (OAS) is a vendor neutral description format for HTTP-based remote APIs.")),(0,o.kt)("p",null,"If you can see ",(0,o.kt)("a",{parentName:"p",href:"https://oai.github.io/Documentation/introduction.html"},"The document about OAS"),",\nOAS is said to have named a rule for writing documents that both machines and people can understand about HTTP-based APIs.\nFor example, when you click that link as shown in the image below in ",(0,o.kt)("a",{parentName:"p",href:"https://petstore.swagger.io/"},"the swagger document"),",\nit connects to ",(0,o.kt)("a",{parentName:"p",href:"https://petstore.swagger.io/v2/swagger.json"},"the OAS document"),".\nThe ",(0,o.kt)("a",{parentName:"p",href:"https://petstore.swagger.io/v2/swagger.json"},"JSON")," or yaml files consisting of text are OAS(Open Api Specification)."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"swagger-to-oas-docs",src:a(6983).Z,width:"401",height:"118"})),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"swagger-to-oas-docs-oas-result",src:a(7723).Z,width:"952",height:"646"})),(0,o.kt)("h3",{id:"oas-generator"},"OAS Generator"),(0,o.kt)("p",null,"We know that OAS is json/yaml document of API. Then, what is the OAS Generator?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"OAS Generator is tool that generate Source code using OAS yaml file."),(0,o.kt)("li",{parentName:"ul"},"In other words, It translates to this flow. API Swagger \u2192 OAS text file(.yaml) \u2192 Source Code(.ts)."),(0,o.kt)("li",{parentName:"ul"},"You can generate various output(Java, Kotlin, Typescript, etc.) using various Generator."),(0,o.kt)("li",{parentName:"ul"},"In Web Front end ecosystem, I understand that ",(0,o.kt)("a",{parentName:"li",href:"https://openapi-generator.tech/docs/generators/typescript-axios"},"typescript-axios")," or ",(0,o.kt)("a",{parentName:"li",href:"https://openapi-generator.tech/docs/generators/typescript-fetch"},"typescript-fetch")," is mainly used.")),(0,o.kt)("p",null,"As will be described later, OAS results are automatically generated in the following ways and benefit from using these codes inside the project.(",(0,o.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/oas-generator-sample-bygm5?file=/src/generate/api.ts:6692-6811"},"code sandbox"),")"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"// Auto generated codes\n...\ndeletePet: async (petId: number, apiKey?: string, options: AxiosRequestConfig = {}): Promise<RequestArgs> => {\n    // verify required parameter 'petId' is not null or undefined\n    assertParamExists('deletePet', 'petId', petId)\n    const localVarPath = `/pet/{petId}`\n        .replace(`{${\"petId\"}}`, encodeURIComponent(String(petId)));\n    // use dummy base URL string because the URL constructor only accepts absolute URLs.\n    const localVarUrlObj = new URL(localVarPath, DUMMY_BASE_URL);\n    let baseOptions;\n    if (configuration) {\n        baseOptions = configuration.baseOptions;\n    }\n\n    const localVarRequestOptions = { method: 'DELETE', ...baseOptions, ...options};\n    const localVarHeaderParameter = {} as any;\n    const localVarQueryParameter = {} as any;\n\n    // authentication petstore_auth required\n    // oauth required\n    await setOAuthToObject(localVarHeaderParameter, \"petstore_auth\", [\"write:pets\", \"read:pets\"], configuration)\n\n    if (apiKey !== undefined && apiKey !== null) {\n        localVarHeaderParameter['api_key'] = String(apiKey);\n    }\n\n\n\n    setSearchParams(localVarUrlObj, localVarQueryParameter);\n    let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};\n    localVarRequestOptions.headers = {...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers};\n\n    return {\n        url: toPathString(localVarUrlObj),\n        options: localVarRequestOptions,\n    };\n},\n...\n")),(0,o.kt)("p",null,"The above example are part of generated code using OAS generator.\nIt generates codes that are filled path, method, headers and are set request and response about each api."),(0,o.kt)("h2",{id:"so-whats-good"},"So, what's good?"),(0,o.kt)("h3",{id:"the-difference-from-conventional-way"},"The difference from conventional way"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"compare-with-oas-process",src:a(9249).Z,width:"1088",height:"497"})),(0,o.kt)("p",null,"We link APIs while developing. If we don't use OAS generator, We will develop following above AS-IS flow.\nWe see API documents and check URL and method, etc and define the type of Request and Response.\nThen, we create functions associated with axios and use API call logics.\nIn this sequence, we can mistake to check the method incorrectly or can mistype during move the Request/Response type one by one.\nIn addition, if API documents are updated, efforts are needed to recognize that the API has been updated and to follow the changes and modify them."),(0,o.kt)("p",null,"On the other hand, If we use OAS generator, we will develop following above TO-BE flow.\nFirst, we bring yaml file(OAS spec) in the API docs. Generally yaml file is auto generated with API docs.\nNext, we generate Axios functions using yaml file. The type of request and response are also generated same time.\nIt is used for API call logic as it is."),(0,o.kt)("p",null,"Even if API document is updated, running the OAS generator again shows the difference from the previous API as git diff,\nand it is easy to see which part has changed and which part needs to be checked."),(0,o.kt)("p",null,"In other words, the advantage is to reduce repetitive work and minimize human errors by reducing the parts that developers write themselves."),(0,o.kt)("h3",{id:"it-is-just-good"},"It is just good?"),(0,o.kt)("p",null,"I talked about advantages, but of course, there are points",(0,o.kt)("del",{parentName:"p"},"(disadvantages)")," to pay attention to."),(0,o.kt)("h4",{id:"1-yaml-files-should-be-able-to-be-extracted-from-api-documents"},"1. Yaml files should be able to be extracted from API documents."),(0,o.kt)("p",null,"I think there are many ways to manage API documents by company and project.\nThe example above is based on the premise of using a swagger.\nIn various other ways, API documents may be shared or development may be carried out without API documents.\nIf API documents are impossible to generate a yaml file, the OAS generate may not be a valid alternative"),(0,o.kt)("h4",{id:"2-api-documents-must-be-accurate"},"2. API documents must be accurate."),(0,o.kt)("p",null,"Since the OAS Generator generates code based on API documents,\nthe auto-generated code becomes inaccurate if the API documents are not accurate.\nFor examples, If fields of request parameter are all set optional, all auto generated type are set optional.\nThen, we can lose advantage of type check because optional is overused.\nIn addition, if the actual serve has been updated but the API document has not been updated, the OAS generator rather complicates the project.\nAPI documents should be as accurate as generating code through API documents."),(0,o.kt)("h4",{id:"3-duplicated-code-the-increase-bundle-size"},"3. Duplicated code, The increase bundle size."),(0,o.kt)("p",null,"OAS Generator generate code using template and API documents.\nTherefore, a specific pattern of template is repeated, which naturally creates duplicated code.\nThis leads to a definite increase in bundle size.\nEven if project development becomes easier and maintenance improves, it will inevitably be reluctant to use it if it adversely affects performance.\nAt the env of this article, we will discuss optimization later, but it is necessary to compare bundle sizes before and after applying OAS Generator."),(0,o.kt)("h4",{id:"4-initial-configuration-code-and-configuration-maintenance"},"4. Initial configuration code and configuration maintenance"),(0,o.kt)("p",null,"What I felt when I applied the OAS Generator was that the initial configuration value was complicated and\nthe learning curve was higher than I expected, and I customized several settings and templates for the project.\nThe fact that there is a customization part means that there are more things to know about future project maintenances,\nso several steps are needed, such as documentation or sufficient sharing within the team."),(0,o.kt)("p",null,"In particular, as described in No. 3, if optimization was conducted for project performance,\nit would be necessary to share the history of this."),(0,o.kt)("h3",{id:"next"},"Next"),(0,o.kt)("p",null,"So far, I think we have outlined the advantages and disadvantages of using the OAS Generator.\nNow, let's take some time to figure out hot to use it."),(0,o.kt)("h2",{id:"usage-of-oas-generator"},"Usage of OAS Generator"),(0,o.kt)("p",null,"The introduction was long. Now I will explain how to use the OAS Generator.\nExcept for Custom Template, most of the uses are to modify settings using the CLI."),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"https://codesandbox.io/s/oas-generator-sample-bygm5"},"code sandbox"),", You can check the code shown in the example below."),(0,o.kt)("h3",{id:"1-get-the-yaml-file"},"1. Get the ",(0,o.kt)("inlineCode",{parentName:"h3"},"yaml")," file."),(0,o.kt)("p",null,"OAS Generator is a way of automatically generating code using a local yaml file.\nIn addition, since it is 1:1 correspondence, one code is generated from one yaml file.\nIf the API document has multiple yaml files, the flow described now must be executed several times."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"usage-1",src:a(2455).Z,width:"1016",height:"631"}),"\nIn this example, I get the ",(0,o.kt)("inlineCode",{parentName:"p"},"petstore.yaml")," file."),(0,o.kt)("h3",{id:"2-generate-code-using-open-api-generator-cli"},"2. generate code using ",(0,o.kt)("inlineCode",{parentName:"h3"},"open-api-generator-cli"),"."),(0,o.kt)("p",null,"Using open-api-generator-cli, specify template, input, and ouput path to generate code."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"npm install @openapitools/openapi-generator-cli\nopenapi-generator-cli generate -g typescript-axios -i ./src/yaml/petstore.yaml -o ./src/generate\n")),(0,o.kt)("p",null,"Like above, add dependency of ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator-cli"},"openapi-generator-cli"),"\nand run ",(0,o.kt)("inlineCode",{parentName:"p"},"openapi-generator-cli")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-g")," is the option to set generator, in this case I used ",(0,o.kt)("inlineCode",{parentName:"li"},"typescript-axios"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-i")," means input. Set yaml file path used generate."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-o")," is output path. Set where the code will be generated.")),(0,o.kt)("p",null,"If you run above code, code is generated in the ",(0,o.kt)("inlineCode",{parentName:"p"},"src/generated")," directory.\n",(0,o.kt)("img",{alt:"usage-2.png",src:a(6287).Z,width:"495",height:"440"})),(0,o.kt)("p",null,"Inside ",(0,o.kt)("inlineCode",{parentName:"p"},"api.ts"),", an axios util function containing the api request and response types and the type are generated together."),(0,o.kt)("h3",{id:"3-use-generated-code"},"3. Use generated code."),(0,o.kt)("p",null,"Now, you can use the generated code.\n",(0,o.kt)("img",{alt:"usage-3.png",src:a(8431).Z,width:"1070",height:"706"})),(0,o.kt)("p",null,"Since it is a code generated based on the typescript, the type check of request and response proceeds successfully.\nWhen referring to the ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," object, it informs the internal type of ",(0,o.kt)("inlineCode",{parentName:"p"},"Pet"),", id , name, category, etc."),(0,o.kt)("h3",{id:"next-1"},"Next"),(0,o.kt)("p",null,"A brief summary of how to use it is as follows."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Get the ",(0,o.kt)("inlineCode",{parentName:"p"},"yaml")," file -> Run OAS generator cli -> Use generated code")),(0,o.kt)("p",null,"However, as with all tools, it is necessary to customize it for real projects.\nIn the ",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/customization"},"official documents"),", it serves several customize guides.\nWhat I used was customizing the template.\nThe customization method to be described in the article is mainly about how to customize the template."),(0,o.kt)("h2",{id:"oas-generator-config"},"OAS Generator Config"),(0,o.kt)("p",null,"There are also some OAS generator settings.\nMainly ",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/usage#generate"},"CLI options")," and\n",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/generators/typescript-axios"},"openapitools.json")," is set."),(0,o.kt)("h3",{id:"the-setting-of-oas-generator---cli"},"The setting of OAS Generator - CLI"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"generator-cli-config.png",src:a(400).Z,width:"871",height:"502"})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-g"),": The option to set ",(0,o.kt)("inlineCode",{parentName:"li"},"generator"),". In this case, use ",(0,o.kt)("inlineCode",{parentName:"li"},"typescript-axios"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-i"),": The target yaml file path."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-o"),": The generated output file path."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-c"),": The setting file of generator."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-t"),": ",(0,o.kt)("strong",{parentName:"li"},"The custom template file path"))),(0,o.kt)("p",null,"The CLI use the ",(0,o.kt)("inlineCode",{parentName:"p"},"generate")," command,and there are five main options.\nThe ",(0,o.kt)("inlineCode",{parentName:"p"},"-t")," option is used to designate custom templates and will be discussed in following articles."),(0,o.kt)("h3",{id:"the-setting-of-oas-generator---config-file"},"The setting of OAS Generator - Config file"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "$schema": "node_modules/@openapitools/openapi-generator-cli/config.schema.json",\n  "spaces": 2,\n  "generator-cli": {\n    "version": "5.3.1"\n  },\n  "supportsES6": true,\n  "withSeparateModelsAndApi": true,\n  "apiPackage": "api",\n  "modelPackage": "models",\n  "enumPropertyNaming": "original",\n  "enumNameSuffix": "",\n  "useSingleRequestParameter": false\n}\n')),(0,o.kt)("p",null,"This configuration file is a file that enters ",(0,o.kt)("inlineCode",{parentName:"p"},"-c")," in the CLI option, and mainly contains the generator configuration values.\nIn this example, we use ",(0,o.kt)("inlineCode",{parentName:"p"},"typescript-axios")," and see ",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/generators/typescript-axios/"},"here")," for more options"),(0,o.kt)("h2",{id:"oas-generator-template"},"OAS Generator Template"),(0,o.kt)("p",null,"It would be good to use the default settings, but you should need to edit setting for fitting actual project.\nOfficial documents has ",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/customization"},"customization guide part"),".\n",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/templating#retrieving-templates"},"Retrieving Templates")," was the most directly helpful item.\nIn other words, the template registered by default is imported and modified according to the project.\nThe way following this article is largely related to the template entering the ",(0,o.kt)("inlineCode",{parentName:"p"},"-t")," option described in the CLI."),(0,o.kt)("h3",{id:"when-do-you-use-custom-template"},"When do you use Custom Template?"),(0,o.kt)("p",null,"This is method to use when you want to modifiy and use a template that uses the default setting.\nFor example, if you want to add a suffix such as ",(0,o.kt)("inlineCode",{parentName:"p"},"Axios")," after the ",(0,o.kt)("inlineCode",{parentName:"p"},"addPet")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"deletePet")," method names as follows,\nyou can modify the template."),(0,o.kt)(i.Z,{mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before using custom template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export class PetApi extends BaseAPI {\n  public addPet(body: Pet, options?: AxiosRequestConfig) {\n    return PetApiFp(this.configuration).addPet(body, options).then((request) => request(this.axios, this.basePath));\n  }\n\n  public deletePet(petId: number, apiKey?: string, options?: AxiosRequestConfig) {\n    return PetApiFp(this.configuration).deletePet(petId, apiKey, options).then((request) => request(this.axios, this.basePath));\n  }\n  ...\n}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After using custom template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export class PetApi extends BaseAPI {\n  // highlight-next-line\n  public addPetAxios(body: Pet, options?: AxiosRequestConfig) {\n    return PetApiFp(this.configuration).addPet(body, options).then((request) => request(this.axios, this.basePath));\n  }\n\n  // highlight-next-line\n  public deletePetAxios(petId: number, apiKey?: string, options?: AxiosRequestConfig) {\n    return PetApiFp(this.configuration).deletePet(petId, apiKey, options).then((request) => request(this.axios, this.basePath));\n  }\n  ...\n}\n")))),(0,o.kt)("p",null,"Of course, it is only a simple examples, and it is possible to add parameters or customize other function."),(0,o.kt)("h3",{id:"flow-of-custom-template"},"Flow of Custom Template"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"generate-flow.png",src:a(8803).Z,width:"1210",height:"196"}),"\nThe previous flow is the flow that generated the Axios function in the yaml file as above.\nIf you add a Custom Template here, the flow changes as follows."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"generate-flow-with-custom.png",src:a(3508).Z,width:"1224",height:"467"}),"\nThe OAS Generator extracts JSON data from the yaml file.\nThis JSON data contains a path, a method, and various information about the API.\nThese JSON data are injected into the Template and generated as an Axios function."),(0,o.kt)("p",null,"The custom to be following here is about hot to change the template."),(0,o.kt)("h3",{id:"get-the-template-files"},"Get the Template files"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"openapi-generator-cli author template -g typescript-axios -o ./mustaches\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"openapi-generator")," has ",(0,o.kt)("inlineCode",{parentName:"p"},"author")," scripts except ",(0,o.kt)("inlineCode",{parentName:"p"},"generate")," script. ",(0,o.kt)("br",null),"\nWhen ",(0,o.kt)("inlineCode",{parentName:"p"},"author")," script is run, the following template is created."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-markdown"},"/mustaches\n\u3134 api.mustache\n\u3134 apiinner.mustache\n\u3134 baseApi.mustache\n\u3134 common.mustache\n\u3134 configuration.mustache\n  ...\n")),(0,o.kt)("p",null,"This is a mustache template used to run OAS Generator with ",(0,o.kt)("inlineCode",{parentName:"p"},"typescript-axios"),".\nIf you don't give the ",(0,o.kt)("inlineCode",{parentName:"p"},"-t")," option in the CLI, by default, use the corresponding mustache template located remotely to generate proceed."),(0,o.kt)("p",null,"In other word, if you modify only the mustache template that you want to modify and delete the remaining unmodified templates,\nyou can reduce the management area by following the remote default settings."),(0,o.kt)("h3",{id:"mustache-template"},"Mustache Template"),(0,o.kt)("p",null,"We can now modify mustache imported to local.\nThis requires a brief understanding of mustache grammar, so if you are not familiar with mustache, check ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/janl/mustache.js"},"this article"),".\nAs alone as you can only read variables, Sections, Lists, and Inverted Sections, since you are modifying an already completed template."),(0,o.kt)("p",null,"For example, if you want to attache a suffix called Axios to the classname created as ",(0,o.kt)("a",{parentName:"p",href:"#when-do-you-use-custom-template"},"the example introduced above"),",\nyou can modify it as follows."),(0,o.kt)(i.Z,{mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=apiInner.mustache",title:"apiInner.mustache"},"{{^useSingleRequestParameter}}\n  public {{nickname}}({{#allParams}}{{paramName}}{{^required}}?{{/required}}: {{{dataType}}}, {{/allParams}}options?: AxiosRequestConfig) {\n  return {{classname}}Fp(this.configuration).{{nickname}}({{#allParams}}{{paramName}}, {{/allParams}}options).then((request) => request(this.axios, this.basePath));\n}\n{{/useSingleRequestParameter}}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=apiInner.mustache",title:"apiInner.mustache"},"{{^useSingleRequestParameter}}\n  // highlight-next-line\n  public {{nickname}}Axios({{#allParams}}{{paramName}}{{^required}}?{{/required}}: {{{dataType}}}, {{/allParams}}options?: AxiosRequestConfig) {\n  return {{classname}}Fp(this.configuration).{{nickname}}({{#allParams}}{{paramName}}, {{/allParams}}options).then((request) => request(this.axios, this.basePath));\n}\n{{/useSingleRequestParameter}}\n")))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"simple-mustache-custom.png",src:a(2215).Z,width:"355",height:"153"})),(0,o.kt)("p",null,"Then, leave only the modified template file and delete the remaining unmodified template files.\nFiles that are not locally generated are automatically generated using remote templates."),(0,o.kt)("h3",{id:"check-json-data"},"Check JSON Data"),(0,o.kt)("p",null,"Now, I have imported the template locally, and I know that I can modify the template.\nHowever, the question still arises is that you do not know what value is included in the variable ",(0,o.kt)("inlineCode",{parentName:"p"},"nickname")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"classname")," in the template image above."),(0,o.kt)("p",null,"Now, it's time to check out the JSON Data, which went over from ",(0,o.kt)("a",{parentName:"p",href:"#flow-of-custom-template"},"Flow of Custom Template"),"."),(0,o.kt)("p",null,"To use appropriate data for the template, you need to find out what data is extracted from the yaml file and in what format it is injected into the template."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"openapi-generator-cli generate  \\ \n  -g typescript-axios  \\\n  -i ./src/yaml/petstore.yaml  \\\n  -o ./src/generate  \\\n  --global-property=debugModels,debugOperations \\\n  > output.txt\n")),(0,o.kt)("p",null,"There are many ways to do this, but if you give the CLI option ",(0,o.kt)("inlineCode",{parentName:"p"},"--global-property=debugModels,debugOperations"),",\nWhat data is extracted from the yaml file is output to the console. Therefore, a method of checking with a text file through ",(0,o.kt)("inlineCode",{parentName:"p"},"> output.txt")," was used."),(0,o.kt)("p",null,"The extracted contents of ",(0,o.kt)("inlineCode",{parentName:"p"},"operations")," follow the image format as shown below, and ",(0,o.kt)("inlineCode",{parentName:"p"},"operators")," that can be seen in the template,\nIt can be seen that data such as ",(0,o.kt)("inlineCode",{parentName:"p"},"classnames"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"path"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"httpMethod")," are included and used in the mustache template.\n",(0,o.kt)("img",{alt:"json-data.png",src:a(6526).Z,width:"383",height:"367"})),(0,o.kt)("h2",{id:"the-example-of-custom-template"},"The example of Custom Template"),(0,o.kt)("p",null,'As an example of using a Custom Template, I brought up the use of "axios" in the suffix.\nHowever, it is only a simple example to help understanding, and it can be applied in various ways in actual use.\nI brought the custom example used in the actual project.'),(0,o.kt)("p",null,"Since we can't see the entire code and following example is part of generated code,\nit may not be clearly understood how it is implemented.\nHowever, I hope you can see the following examples as a possibility and get the idea of using Custom Template."),(0,o.kt)("h3",{id:"convert-from-enum-type-to-union-type"},"Convert from Enum Type to Union Type"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"typescript-axios")," template is using ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," type of typescript when define type. But I don't like to use ",(0,o.kt)("inlineCode",{parentName:"p"},"Enum")," type.\nSo, I tried to convert to ",(0,o.kt)("inlineCode",{parentName:"p"},"Union")," type."),(0,o.kt)(i.Z,{groupId:"enum-to-union",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=modelGeneric.mustache",title:"modelGeneric.mustache"},"{{#vars}}\n{{#isEnum}}\n  export enum {{enumName}} {\n{{#allowableValues}}\n{{#enumVars}}\n{{{name}}} = {{{value}}}{{^-last}},{{/-last}}\n{{/enumVars}}\n{{/allowableValues}}\n}\n{{/isEnum}}\n{{/vars}}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=modelGeneric.mustache",title:"modelGeneric.mustache"},"{{#vars}}\n{{#isEnum}}\n  export type {{enumName}} =\n{{#allowableValues}}\n{{#enumVars}}\n{{{value}}} {{^-last}}|{{/-last}}\n{{/enumVars}}\n{{/allowableValues}}\n{{/isEnum}}\n{{/vars}}\n")))),(0,o.kt)(i.Z,{groupId:"enum-to-union",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export enum PetStatusEnum {\n  Available = 'available',\n  Pending = 'pending',\n  Sold = 'sold',\n}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export type PetStatusEnum =\n  'available' |\n  'pending' |\n  'sold'\n")))),(0,o.kt)("h3",{id:"convert-to-snake-case-variable-naming-rule-to-camel-case-variable-naming-rule"},"Convert to Snake case variable naming rule to Camel case variable naming rule"),(0,o.kt)("p",null,"The server used the snake case for the variable naming rule, and the client used the camel case as the variable naming rule.\nTherefore, there were difficulties caused by different variable names used in the OAS document and the actual generated code.\nUse the ",(0,o.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/docs/templating/#mustache-lambdas"},"lambdas")," provided by the OAS generator.\nSnake case naming variables were collectively converted into camel case naming variables."),(0,o.kt)(i.Z,{groupId:"snake-to-camel",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=modelGeneric.mustache",title:"modelGeneric.mustache"},"  {{#vars}}\n    '{{baseName}}'{{^required}}?{{/required}}: {{#isEnum}}{{{datatypeWithEnum}}}{{/isEnum}}{{^isEnum}}{{{dataType}}}{{#isNullable}} | null{{/isNullable}}{{/isEnum}};\n  {{/vars}}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=modelGeneric.mustache",title:"modelGeneric.mustache"},"  {{#vars}}\n    // highlight-next-line\n    '{{#lambda.camelcase}}{{baseName}}{{/lambda.camelcase}}'{{^required}}?{{/required}}: {{#isEnum}}{{{datatypeWithEnum}}}{{/isEnum}}{{^isEnum}}{{{dataType}}}{{#isNullable}} | null{{/isNullable}}{{/isEnum}};\n  {{/vars}}\n")))),(0,o.kt)(i.Z,{groupId:"snake-to-camel",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export interface User {\n  id: number;\n  username: string;\n  first_name: string;\n  last_name: string;\n  email: string;\n  password: string;\n  phone: string;\n  user_status: number;\n}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export interface User {\n  id: number;\n  username: string;\n  // highlight-next-line\n  firstName: string;\n  // highlight-next-line\n  lastName: string;\n  email: string;\n  password: string;\n  phone: string;\n  // highlight-next-line\n  userStatus: number;\n}\n")))),(0,o.kt)("h3",{id:"edit-util-function-in-template"},"Edit util function in template"),(0,o.kt)("p",null,"I extracted the utility function that commonly used logic in ",(0,o.kt)("inlineCode",{parentName:"p"},"typescript-axios")," and generate code.\nFor example, serialize did not need to be used in our project, and ",(0,o.kt)("inlineCode",{parentName:"p"},"serialize")," logic was excluded by modifying it as follows."),(0,o.kt)(i.Z,{groupId:"custom-util-func",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=common.mustache",title:"common.mustache"},"export const serializeDataIfNeeded = function (value: any, requestOptions: any, configuration?: Configuration) {\n  const nonString = typeof value !== 'string';\n  const needsSerialization = nonString && configuration && configuration.isJsonMime\n    ? configuration.isJsonMime(requestOptions.headers['Content-Type'])\n    : nonString;\n  return needsSerialization\n    ? JSON.stringify(value !== undefined ? value : {})\n    : (value || \"\");\n}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Custom Template",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=modelGeneric.mustache",title:"modelGeneric.mustache"},"export const serializeDataIfNeeded = function (value: any, requestOptions: any, configuration?: Configuration) {\n  const nonString = typeof value !== 'string';\n  // highlight-next-line\n  const needsSerialization = false;\n  return needsSerialization\n    ? JSON.stringify(value !== undefined ? value : {})\n    : (value || \"\");\n}\n")))),(0,o.kt)(i.Z,{groupId:"custom-util-func",mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export const serializeDataIfNeeded = function (value: any, requestOptions: any, configuration?: Configuration) {\n  const nonString = typeof value !== 'string';\n  const needsSerialization = nonString && configuration && configuration.isJsonMime\n    ? configuration.isJsonMime(requestOptions.headers['Content-Type'])\n    : nonString;\n  return needsSerialization\n    ? JSON.stringify(value !== undefined ? value : {})\n    : (value || \"\");\n}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export const serializeDataIfNeeded = function (value: any, requestOptions: any, configuration?: Configuration) {\n  const nonString = typeof value !== 'string';\n  // highlight-next-line\n  const needsSerialization = false;\n  return needsSerialization\n    ? JSON.stringify(value !== undefined ? value : {})\n    : (value || \"\");\n}\n")))),(0,o.kt)("h2",{id:"the-story-of-optimization"},"The story of optimization"),(0,o.kt)("p",null,"We understand pros and cons of OAS Generator, and we know that usage and method to customize.\nIf so, the essential story is optimization.\nA good tool has been applied, and it reduces hassle and improves development stability,\nbut it can't be easily use if it adversely effects performance."),(0,o.kt)("p",null,"OAS Generator is largely influenced by bundle size. When using the OAS Generator, the amount of code increases,\nwhich leads to an increase in bundle size.\nThen user sees the web page late. Therefore, it must be checked."),(0,o.kt)("p",null,"When I applied it to the project, there were about 10 yarm files in the project, and each yaml file had a single feature.\nAs this was gradually applied one by one for each function, the generated code had the following capacity."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"bundle-size-before",src:a(1947).Z,width:"1111",height:"389"})),(0,o.kt)("p",null,"When one feature was applied, the generated code had a size of 20KB based on gzip, and 63KB when two features were applied.\nConsidering that the total gzip size of the project at that time was around 560KB,\nit was a fatal condition that increased the capacity by 11% of the total.\nEven since it was not applied to all features, it could be expected that the size would increase arithmetically in the future."),(0,o.kt)("h3",{id:"attempt-1-reduce-total-code-size"},"Attempt 1: Reduce total code size."),(0,o.kt)("p",null,"The first attempt is to reduce the amount of code. generate, due to the nature of automatic code generation,\na single line of templates influenced dozens of generated codes.\nThis led to an increase in the overall code volume, bundle size.\nTherefore, the required variable's guard logic and the header settings that are not used in our project were removed.\nIn addition, for the same common code repeatedly generated by the OAS Generator,\nmethods such as moving it inside the project and using it as a common function were used."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"bundle-size-solution-1",src:a(4266).Z,width:"693",height:"302"})),(0,o.kt)("p",null,"This solution reduced the size from 63KB to 34KB to about 53%. The code that you don't use for each project is different,\nso the degree of reduction is different. Please note that removing unnecessary logic from the template was also effective in reducing the bundle size."),(0,o.kt)("h3",{id:"attempt-2-tree-shaking"},"Attempt 2: Tree shaking"),(0,o.kt)("p",null,"The amount of code has been reduced enough. However, there was still a way to further reduce the bundle size.\nIt's tree shaking."),(0,o.kt)("p",null,"If you use all the APIs in the API document, you don't have to consider tree shaking, but our project didn't\nTherefore, if unused API codes are included in the bundle, it means that unnecessary codes are included, which can be seen as an improvement."),(0,o.kt)("p",null,"This may vary depending on the bundler and usage environment, but the project I experienced was building using webpack v5,\nand webpack v5 was using variable units instead of file units about tree shaking, so I thought tree shaking was working well, but it wasn't.\nThis is because APIs were not created with each variable, but were created in the form of a method under one object, class."),(0,o.kt)("p",null,"In webpack v5, each variable supports tree shaking, and the unused variable is excluded from the bundle,\nbut the key / value present in the object is not."),(0,o.kt)("p",null,"Therefore, it was changed from a structure in which all API call functions were contained in one existing object\nto a structure in which each API call function was separated into each variable."),(0,o.kt)("p",null,"This change was also carried out by customizing the template."),(0,o.kt)(i.Z,{mdxType:"Tabs"},(0,o.kt)(r.Z,{value:"before",label:"Before Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export const PetStoreApi {\n  getPet: () => { ... },\n  postPet: () => { ... },\n}\n"))),(0,o.kt)(r.Z,{value:"after",label:"After Generated Code",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"export const petStoreGetPet = () => { ... }\nexport const petStorePostPet = () => { ... }\n")))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"bundle-size-tree-shaking",src:a(5401).Z,width:"729",height:"314"})),(0,o.kt)("p",null,"After the tree shaking, the size decreased from 34KB to 25KB.\nAlthough it has not improved significantly in terms of ratio,\nit was possible to guarantee that only the necessary codes were included in future implementations."),(0,o.kt)("h3",{id:"result"},"Result"),(0,o.kt)("p",null,"The bundle-size optimization caused by OAS ends here.\nIf you look at the final result, the OAS generated code takes up 25KB, which seems to be quite a lot.\nComparing the entire project bundle-size was as follows.\n",(0,o.kt)("img",{alt:"bundle-size-total",src:a(7546).Z,width:"689",height:"347"})),(0,o.kt)("p",null,"When OAS was not applied at all, the project, which was about 567KB, showed a slight increase of about 572KB after OAS was applied.\nTherefore, it was concluded that even if OAS is applied, size is not a big problem if appropriate optimization and analysis processes are performed."),(0,o.kt)("h2",{id:"recap"},"Recap"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The OAS Generator is a tool for converting API documents into development code(.ts)."),(0,o.kt)("li",{parentName:"ul"},"This reduces human errors and reduces resources to work manually, such as creating types."),(0,o.kt)("li",{parentName:"ul"},"Code is auto generated like this flow. ",(0,o.kt)("inlineCode",{parentName:"li"},"yaml file -> oas-generator-cli -> generated code"),"."),(0,o.kt)("li",{parentName:"ul"},"The OAS Generator can customize and use the code template for the project."),(0,o.kt)("li",{parentName:"ul"},"If you don't optimize the OAS generator, It can cause a lot of lose to the bundle size, but if you do so, you won't have to worry.")))}h.isMDXComponent=!0},1947:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/bundle-size-before-7407fd7d58a90ad46c640a81a7f01e3f.png"},4266:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/bundle-size-solution-1-97fb457689d2bf829e4fe626154a7f3d.png"},7546:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/bundle-size-total-c9e54fee59b31c4f63e26b1629cacea1.png"},5401:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/bundle-size-tree-shaking-7579190bad4c794d953b194abdadb72b.png"},9249:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/compare-with-oas-process-f06411dcf6ef44a750902a331a7decae.png"},2215:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/custom-template-file-structure-3f7246499275329f6899dafd70a9be64.png"},3508:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/generate-flow-with-custom-da080608e96a61f1372bca8ab74f64c0.png"},8803:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/generate-flow-c98b06d44356831c20680e6e878f50e9.png"},400:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/generator-cli-config-1ef96fee0f92f6a567dc7c31d7886e6d.png"},6526:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/json-data-56707278962b502322435f4f1d2e6bad.png"},7723:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oas-json-53d33e0ad70801d4dadb7687fe11c936.png"},6983:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/swagger-be194e19af167f8cd0f468c99ce2b9a3.png"},2455:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-1-f4f230376f161a12b032a419b0d19a84.png"},6287:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-2-940df81f97a5d7ea75bb27a0e8592dad.png"},8431:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/usage-3-981c2eb7577bd6f46c13fc4320ac99fb.png"}}]);